(global["webpackJsonp"] = global["webpackJsonp"] || []).push([["components/trtc-room/trtc-room"],{

/***/ 128:
/*!********************************************************************************************************************************!*\
  !*** D:/job/bigwoods/KunLin/trtc-school/program/school-face-to-face/school-face-to-face-mp/components/trtc-room/trtc-room.vue ***!
  \********************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _trtc_room_vue_vue_type_template_id_23180802___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./trtc-room.vue?vue&type=template&id=23180802& */ 129);
/* harmony import */ var _trtc_room_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./trtc-room.vue?vue&type=script&lang=js& */ 131);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _trtc_room_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _trtc_room_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _trtc_room_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./trtc-room.vue?vue&type=style&index=0&lang=less& */ 141);
/* harmony import */ var _software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */ 15);

var renderjs





/* normalize component */

var component = Object(_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__["default"])(
  _trtc_room_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__["default"],
  _trtc_room_vue_vue_type_template_id_23180802___WEBPACK_IMPORTED_MODULE_0__["render"],
  _trtc_room_vue_vue_type_template_id_23180802___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null,
  false,
  _trtc_room_vue_vue_type_template_id_23180802___WEBPACK_IMPORTED_MODULE_0__["components"],
  renderjs
)

component.options.__file = "job/bigwoods/KunLin/trtc-school/program/school-face-to-face/school-face-to-face-mp/components/trtc-room/trtc-room.vue"
/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ 129:
/*!***************************************************************************************************************************************************************!*\
  !*** D:/job/bigwoods/KunLin/trtc-school/program/school-face-to-face/school-face-to-face-mp/components/trtc-room/trtc-room.vue?vue&type=template&id=23180802& ***!
  \***************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_trtc_room_vue_vue_type_template_id_23180802___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./trtc-room.vue?vue&type=template&id=23180802& */ 130);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_trtc_room_vue_vue_type_template_id_23180802___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_trtc_room_vue_vue_type_template_id_23180802___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "recyclableRender", function() { return _software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_trtc_room_vue_vue_type_template_id_23180802___WEBPACK_IMPORTED_MODULE_0__["recyclableRender"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "components", function() { return _software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_trtc_room_vue_vue_type_template_id_23180802___WEBPACK_IMPORTED_MODULE_0__["components"]; });



/***/ }),

/***/ 130:
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/job/bigwoods/KunLin/trtc-school/program/school-face-to-face/school-face-to-face-mp/components/trtc-room/trtc-room.vue?vue&type=template&id=23180802& ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "recyclableRender", function() { return recyclableRender; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "components", function() { return components; });
var components
var render = function() {
  var _vm = this
  var _h = _vm.$createElement
  var _c = _vm._self._c || _h
  var g0 = JSON.stringify(_vm.streamList)

  var l0 = _vm.__map(_vm.streamList, function(item, streamID) {
    var g1 = item.userID.split("groupid")[1].substr(0, 1)
    var g2 = item.userID.split("groupid")[1].substr(0, 1)
    return {
      $orig: _vm.__get_orig(item),
      g1: g1,
      g2: g2
    }
  })

  _vm.$mp.data = Object.assign(
    {},
    {
      $root: {
        g0: g0,
        l0: l0
      }
    }
  )
}
var recyclableRender = false
var staticRenderFns = []
render._withStripped = true



/***/ }),

/***/ 131:
/*!*********************************************************************************************************************************************************!*\
  !*** D:/job/bigwoods/KunLin/trtc-school/program/school-face-to-face/school-face-to-face-mp/components/trtc-room/trtc-room.vue?vue&type=script&lang=js& ***!
  \*********************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _software_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_trtc_room_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./trtc-room.vue?vue&type=script&lang=js& */ 132);
/* harmony import */ var _software_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_trtc_room_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_software_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_trtc_room_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _software_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_trtc_room_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _software_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_trtc_room_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_software_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_trtc_room_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 132:
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/job/bigwoods/KunLin/trtc-school/program/school-face-to-face/school-face-to-face-mp/components/trtc-room/trtc-room.vue?vue&type=script&lang=js& ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;






































































































































































































































































































































































































































































































































var _GenerateTestUserSig = __webpack_require__(/*! ../../debug/GenerateTestUserSig */ 68);
var _userController = _interopRequireDefault(__webpack_require__(/*! ./controller/user-controller */ 133));
var _pusher = _interopRequireDefault(__webpack_require__(/*! ./model/pusher */ 138));
var _constants = __webpack_require__(/*! ./common/constants */ 137);
var _event = _interopRequireDefault(__webpack_require__(/*! ./utils/event */ 134));
var ENV = _interopRequireWildcard(__webpack_require__(/*! ./utils/environment */ 139));
var _vuex = __webpack_require__(/*! vuex */ 9);function _getRequireWildcardCache() {if (typeof WeakMap !== "function") return null;var cache = new WeakMap();_getRequireWildcardCache = function _getRequireWildcardCache() {return cache;};return cache;}function _interopRequireWildcard(obj) {if (obj && obj.__esModule) {return obj;}if (obj === null || typeof obj !== "object" && typeof obj !== "function") {return { default: obj };}var cache = _getRequireWildcardCache();if (cache && cache.has(obj)) {return cache.get(obj);}var newObj = {};var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;for (var key in obj) {if (Object.prototype.hasOwnProperty.call(obj, key)) {var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;if (desc && (desc.get || desc.set)) {Object.defineProperty(newObj, key, desc);} else {newObj[key] = obj[key];}}}newObj.default = obj;if (cache) {cache.set(obj, newObj);}return newObj;}function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);if (enumerableOnly) symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;});keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i] != null ? arguments[i] : {};if (i % 2) {ownKeys(Object(source), true).forEach(function (key) {_defineProperty(target, key, source[key]);});} else if (Object.getOwnPropertyDescriptors) {Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));} else {ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}



var TAG_NAME = 'TRTC-ROOM';var _default2 =

{
  data: function data() {
    return {
      clock: false,
      clockTime: null,
      over: false,
      pusher: null,
      sendNotice: false,
      // debugMode: false, // 是否开启调试模式
      debugPanel: true,
      // 是否打开组件调试面板
      debug: false,
      // 是否打开player pusher 的调试信息
      streamList: [],
      // 用于渲染player列表,存储stram
      userList: [],
      // 扁平化的数据用来返回给用户
      template: '',
      // 不能设置默认值，当默认值和传入组件的值不一致时，iOS渲染失败
      cameraPosition: '',
      panelName: '',
      // 控制面板名称，包括 setting-panel  memberlist-panel
      localVolume: 0,
      remoteVolumeList: [],
      appVersion: ENV.APP_VERSION,
      libVersion: ENV.LIB_VERSION,
      debugMode: '' };

  },

  components: {},
  computed: _objectSpread({},
  (0, _vuex.mapGetters)(['wxInfo', 'userInfo'])),

  props: {
    // 必要的初始化参数
    config: {
      type: Object,
      default: function _default() {return {
          sdkAppID: '',
          userID: '',
          userSig: '',
          template: '',
          debugMode: '' };} },


    parter: {
      default: null } },


  watch: {
    streamList: function streamList(newVal, oldVal) {
      console.log('streamList::::::::', newVal, oldVal);
      this.streamList = newVal;
    },
    config: {
      handler: function handler(newVal, oldVal) {
        console.log('watch config');
        this.propertyObserverFun({
          name: 'config',
          newVal: newVal,
          oldVal: oldVal });

      },
      deep: true } },


  created: function created() {
    // 在组件实例刚刚被创建时执行
    console.log(TAG_NAME, 'created', ENV);
  },
  beforeMount: function beforeMount() {
    // 在组件实例进入页面节点树时执行
    console.log(TAG_NAME, 'attached');
    this.initFun();
  },
  mounted: function mounted() {
    // 在组件在视图层布局完成后执行
    console.log(TAG_NAME, 'ready');
  },
  destroyed: function destroyed() {
    // 在组件实例被从页面节点树移除时执行
    console.log(TAG_NAME, 'detached'); // 停止所有拉流，并重置数据

    this.exitRoom();
  },
  error: function error(_error) {
    // 每当组件方法抛出错误时执行
    console.log(TAG_NAME, 'error', _error);
  },
  onPageShow: function onPageShow() {
    // 组件所在的页面被展示时执行
    console.log(TAG_NAME, 'show status:', this.status);

    if (this.status.isPending) {
      // 经历了 5000 挂起事件
      this.status.isPending = false;
    }

    if (this.status.isPush) {
      // 小程序hide - show 有一定概率本地黑屏或静止，远端正常，或者远端和本地同时黑屏或静止，需要手动启动预览，非必现
      // this.data.pusher.getPusherContext().startPreview()
      // this.data.pusher.getPusherContext().resume()
    }
  },
  onPageHide: function onPageHide() {
    // 组件所在的页面被隐藏时执行
    console.log(TAG_NAME, 'hide');
  },
  onPageResize: function onPageResize(size) {
    // 组件所在的页面尺寸变化时执行
    console.log(TAG_NAME, 'resize', size);
  },
  methods: {
    setData: _GenerateTestUserSig.setData,
    //获取当前面试者信息
    /**
     * 初始化各项参数和用户控制模块，在组件实例触发 attached 时调用，此时不建议对View进行变更渲染（调用setData方法）
     */
    initFun: function initFun() {
      console.log(TAG_NAME, '_init');
      this.userController = new _userController.default(this);
      this._emitter = new _event.default();
      this.EVENT = _constants.EVENT;
      this.initStatusFun();
      this.bindEventFun();
      this.bindEventGridFun();
      console.log(TAG_NAME, '_init success component:', this);
    },

    //发送通知
    setNotice: function setNotice() {var _this = this;
      this.$req.sendMiniMsg({
        roomNO: this.config.roomID }).
      then(function (ret) {
        _this.$com.showToast({ tip: '通知已发出' });
        _this.sendNotice = true;
        _this.$req.modifyRoomId({
          status: 2,
          roomNO: _this.config.roomID });

      });
    },
    //获取面试题
    queryParterExams: function queryParterExams() {var _this2 = this;
      this.$req.queryParterExams({
        roomNO: this.config.roomID }).
      then(function (ret) {
        console.log(ret);
        _this2.$parent.setItems(ret);
      });
    },

    /**
        * 进房
        * @param {Object} params 必传 roomID 取值范围 1 ~ 4294967295
        * @returns {Promise}
        */
    enterRoom: function enterRoom(params) {var _this3 = this;
      return new Promise(function (resolve, reject) {
        console.log(TAG_NAME, 'enterRoom');
        console.log(TAG_NAME, 'params', params);
        console.log(TAG_NAME, 'config', _this3.config);
        console.log(TAG_NAME, 'pusher', _this3.pusher); // 1. 补齐进房参数，校验必要参数是否齐全

        console.log('进房......', params, _this3.config, _this3.pusher);


        if (_this3.config.userID.split('_groupid')[1].substr(0, 1) == '3') {
          // 	this.$com.showToast({tip: '面试者进入'})
          // 	console.log('面试者进入');
          _this3.$req.modifyRoomId({
            status: 3,
            roomNO: _this3.config.roomID });

        }

        //开始计时
        console.log('this.config.starttime', _this3.config.starttime);
        console.log('this.config.endtime', _this3.config.endtime);
        // if(this.config.starttime){
        // 	let time = setInterval(() => {

        // 		if(this.moment() > this.moment(this.config.starttime) && this.clock!='已结束'){
        // 			this.clock = this.moment(this.moment(this.config.endtime) - this.moment()).add(-8,'hours').format("HH:mm:ss");
        // 			if(this.clock == '00:00:00'){
        // 				this.clock = '已超时';
        // 				clearInterval(time);
        // 			}
        // 		}
        // 	},1000)
        // }


        if (params) {
          Object.assign(_this3.pusher, params);
          Object.assign(_this3.config, params);
        }

        if (!_this3.checkParamFun(_this3.config)) {
          reject(new Error('缺少必要参数'));
          return;
        } // 2. 根据参数拼接 push url，赋值给 live-pusher，

        _this3.getPushUrlFun(_this3.config).
        then(function (pushUrl) {
          _this3.pusher.url = pushUrl;
          _this3.setData(
          {
            pusher: _this3.pusher },

          function () {
            console.log(TAG_NAME, 'enterRoom success', _this3.pusher); // view 渲染成功回调后，开始推流

            _this3.pusher.getPusherContext().start();
            _this3.status.isPush = true;
            resolve();
          });

        }).
        catch(function (res) {
          // 获取 room sig 失败, 进房失败需要通过 pusher state 事件通知
          console.error(TAG_NAME, 'enterRoom fail', res);
          reject(res);
        });
      });
    },

    /**
        * 退房，停止推流和拉流，并重置数据
        * @returns {Promise}
        */
    exitRoom: function exitRoom() {var _this4 = this;

      if (this.userInfo.groupid == '3') {
        console.log('this.config.roomID', this.config.roomID);
        // this.$req.modifyRoomId({
        // 	status: 4,
        // 	roomNO: this.config.roomID
        // })
      }

      return new Promise(function (resolve, reject) {
        console.log(TAG_NAME, 'exitRoom');
        _this4.pusher.reset();
        _this4.status.isPush = false;
        var result = _this4.userController.reset();
        _this4.setData(
        {
          pusher: _this4.pusher,
          userList: result.userList,
          streamList: result.streamList },

        function () {
          // 在销毁页面时调用，不会走到这里
          resolve({
            userList: _this4.userList,
            streamList: _this4.streamList });

          console.log(TAG_NAME, 'exitRoom success', _this4.pusher, _this4.streamList, _this4.userList);
        });

      });
    },

    /**
        * 开启摄像头
        * @returns {Promise}
        */
    publishLocalVideo: function publishLocalVideo() {
      // 设置 pusher enableCamera
      console.log(TAG_NAME, 'publishLocalVideo 开启摄像头');
      return this.setPusherConfigFun({
        enableCamera: true });

    },

    /**
        * 关闭摄像头
        * @returns {Promise}
        */
    unpublishLocalVideo: function unpublishLocalVideo() {
      // 设置 pusher enableCamera
      console.log(TAG_NAME, 'unpublshLocalVideo 关闭摄像头');
      return this.setPusherConfigFun({
        enableCamera: false });

    },

    /**
        * 开启麦克风
        * @returns {Promise}
        */
    publishLocalAudio: function publishLocalAudio() {
      // 设置 pusher enableCamera
      console.log(TAG_NAME, 'publishLocalAudio 开启麦克风');
      return this.setPusherConfigFun({
        enableMic: true });

    },

    /**
        * 关闭麦克风
        * @returns {Promise}
        */
    unpublishLocalAudio: function unpublishLocalAudio() {
      // 设置 pusher enableCamera
      console.log(TAG_NAME, 'unpublshLocalAudio 关闭麦克风');
      return this.setPusherConfigFun({
        enableMic: false });

    },

    /**
        * 订阅远端视频 主流 小画面 辅流
        * @param {Object} params {userID,streamType} streamType 传入 small 时修改对应的主流url的 streamtype 参数为small
        * @returns {Promise}
        */
    subscribeRemoteVideo: function subscribeRemoteVideo(params) {
      console.log(TAG_NAME, 'subscribeRemoteVideo', params); // 设置指定 user streamType 的 muteVideo 为 false

      var config = {
        muteVideo: false };
      // 本地数据结构里的 streamType 只支持 main 和 aux ，订阅small 也是对main进行处理

      var streamType = params.streamType === 'small' ? 'main' : params.streamType;

      if (params.streamType === 'small' || params.streamType === 'main') {
        var stream = this.userController.getStream({
          userID: params.userID,
          streamType: streamType });


        if (stream && stream.streamType === 'main') {
          console.log(TAG_NAME, 'subscribeRemoteVideo switch small', stream.src);

          if (params.streamType === 'small') {
            config.src = stream.src.replace('main', 'small');
            config._definitionType = 'small'; // 用于设置面板的渲染
          } else if (params.streamType === 'main') {
            stream.src = stream.src.replace('small', 'main');
            config._definitionType = 'main';
          }

          console.log(TAG_NAME, 'subscribeRemoteVideo', stream.src);
        }
      }

      return this.setPlayerConfigFun({
        userID: params.userID,
        streamType: streamType,
        config: config });

    },

    /**
        * 取消订阅远端视频
        * @param {Object} params {userID,streamType}
        * @returns {Promise}
        */
    unsubscribeRemoteVideo: function unsubscribeRemoteVideo(params) {
      console.log(TAG_NAME, 'unsubscribeRemoteVideo', params); // 设置指定 user streamType 的 muteVideo 为 true

      return this.setPlayerConfigFun({
        userID: params.userID,
        streamType: params.streamType,
        config: {
          muteVideo: true } });


    },

    /**
        * 订阅远端音频
        * @param {Object} params userID 用户ID
        * @returns {Promise}
        */
    subscribeRemoteAudio: function subscribeRemoteAudio(params) {
      console.log(TAG_NAME, 'subscribeRemoteAudio', params);
      return this.setPlayerConfigFun({
        userID: params.userID,
        streamType: 'main',
        config: {
          muteAudio: false } });


    },

    /**
        * 取消订阅远端音频
        * @param {Object} params userID 用户ID
        * @returns {Promise}
        */
    unsubscribeRemoteAudio: function unsubscribeRemoteAudio(params) {
      console.log(TAG_NAME, 'unsubscribeRemoteAudio', params);
      return this.setPlayerConfigFun({
        userID: params.userID,
        streamType: 'main',
        config: {
          muteAudio: true } });


    },

    on: function on(eventCode, handler, context) {
      this._emitter.on(eventCode, handler, context);
    },
    off: function off(eventCode, handler) {
      this._emitter.off(eventCode, handler);
    },
    getRemoteUserList: function getRemoteUserList() {
      return this.userList;
    },

    /**
        * 切换前后摄像头
        */
    switchCamera: function switchCamera() {var _this5 = this;
      if (!this.cameraPosition) {
        // this.data.pusher.cameraPosition 是初始值，不支持动态设置
        this.cameraPosition = this.pusher.frontCamera;
      }

      console.log(TAG_NAME, 'switchCamera', this.cameraPosition);
      this.cameraPosition = this.cameraPosition === 'front' ? 'back' : 'front';
      this.setData(
      {
        cameraPosition: this.cameraPosition },

      function () {
        console.log(TAG_NAME, 'switchCamera success', _this5.cameraPosition);
      });
      // wx 7.0.9 不支持动态设置 pusher.devicePosition ，需要调用api设置，这里修改cameraPosition是为了记录状态

      this.pusher.getPusherContext().switchCamera();
    },

    /**
        * 设置指定player view的渲染坐标和尺寸
        * @param {object} params
        * userID: string
        * streamType: string
        * xAxis: number
        * yAxis: number
        * width: number
        * height: number
        * @returns {Promise}
        */
    setViewRect: function setViewRect(params) {
      console.log(TAG_NAME, 'setViewRect', params);

      if (this.pusher.template !== 'custom') {
        console.warn("\u5982\u9700\u4F7F\u7528setViewRect\u65B9\u6CD5\uFF0C\u8BF7\u8BBE\u7F6Etemplate:\"custom\", \u5F53\u524D template:\"".concat(this.pusher.template, "\""));
      }

      if (this.pusher.userID === params.userID) {
        return this.setPusherConfigFun({
          xAxis: params.xAxis,
          yAxis: params.yAxis,
          width: params.width,
          height: params.height });

      }

      return this.setPlayerConfigFun({
        userID: params.userID,
        streamType: params.streamType,
        config: {
          xAxis: params.xAxis,
          yAxis: params.yAxis,
          width: params.width,
          height: params.height } });


    },

    /**
        * 设置指定 player 或者 pusher view 是否可见
        * @param {object} params
        * userID: string
        * streamType: string
        * isVisible：boolean
        * @returns {Promise}
        */
    setViewVisible: function setViewVisible(params) {
      console.log(TAG_NAME, 'setViewVisible', params); // if (this.data.pusher.template !== 'custom') {
      //   console.warn(`如需使用setViewVisible方法，请设置template:"custom", 当前 template:"${this.data.pusher.template}"`)
      // }

      if (this.pusher.userID === params.userID) {
        return this.setPusherConfigFun({
          isVisible: params.isVisible });

      }

      return this.setPlayerConfigFun({
        userID: params.userID,
        streamType: params.streamType,
        config: {
          isVisible: params.isVisible } });


    },

    /**
        * 设置指定player view的层级
        * @param {Object} params
        * userID: string
        * streamType: string
        * zindex: number
        * @returns {Promise}
        */
    setViewZIndex: function setViewZIndex(params) {
      console.log(TAG_NAME, 'setViewZIndex', params);

      if (this.pusher.template !== 'custom') {
        console.warn("\u5982\u9700\u4F7F\u7528setViewZIndex\u65B9\u6CD5\uFF0C\u8BF7\u8BBE\u7F6Etemplate:\"custom\", \u5F53\u524D template:\"".concat(this.pusher.template, "\""));
      }

      if (this.pusher.userID === params.userID) {
        return this.setPusherConfigFun({
          zindex: params.zindex });

      }

      return this.setPlayerConfigFun({
        userID: params.userID,
        streamType: params.streamType,
        config: {
          zindex: params.zindex } });


    },

    /**
        * 播放背景音
        * @param {Object} params url
        * @returns {Promise}
        */
    playBGM: function playBGM(params) {var _this6 = this;
      return new Promise(function (resolve, reject) {
        _this6.pusher.getPusherContext().playBGM({
          url: params.url,
          // 已经有相关事件不需要在这里监听,目前用于测试
          success: function success() {
            console.log(TAG_NAME, '播放背景音成功'); // this._emitter.emit(EVENT.BGM_PLAY_START)

            resolve();
          },
          fail: function fail() {
            console.log(TAG_NAME, '播放背景音失败');

            _this6._emitter.emit(_constants.EVENT.BGM_PLAY_FAIL);

            reject(new Error('播放背景音失败'));
          } // complete: () => {
          //   console.log(TAG_NAME, '背景完成')
          //   this._emitter.emit(EVENT.BGM_PLAY_COMPLETE)
          // },
        });
      });
    },
    stopBGM: function stopBGM() {
      this.pusher.getPusherContext().stopBGM();
    },
    pauseBGM: function pauseBGM() {
      this.pusher.getPusherContext().pauseBGM();
    },
    resumeBGM: function resumeBGM() {
      this.pusher.getPusherContext().resumeBGM();
    },

    /**
        * 设置背景音音量
        * @param {Object} params volume
        */
    setBGMVolume: function setBGMVolume(params) {
      this.pusher.getPusherContext().setBGMVolume({
        volume: params.volume });

    },

    /**
        * 设置麦克风音量
        * @param {Object} params volume
        */
    setMICVolume: function setMICVolume(params) {
      this.pusher.getPusherContext().setMICVolume({
        volume: params.volume });

    },

    /**
        * 发送SEI消息
        * @param {Object} params message
        * @returns {Promise}
        */
    sendSEI: function sendSEI(params) {var _this7 = this;
      return new Promise(function (resolve, reject) {
        _this7.pusher.getPusherContext().sendMessage({
          msg: params.message,
          success: function success(result) {
            resolve(result);
          } });

      });
    },

    /**
        * pusher 和 player 的截图并保存
        * @param {Object} params userID streamType
        * @returns {Promise}
        */
    snapshot: function snapshot(params) {var _this8 = this;
      console.log(TAG_NAME, 'snapshot', params);
      return new Promise(function (resolve, reject) {
        _this8.captureSnapshot(params).
        then(function (result) {
          wx.saveImageToPhotosAlbum({
            filePath: result.tempImagePath,

            success: function success(res) {
              wx.showToast({
                title: '已保存到相册' });

              console.log('save photo is success', res);
              resolve(result);
            },

            fail: function fail(error) {
              wx.showToast({
                icon: 'none',
                title: '保存失败' });

              console.log('save photo is fail', error);
              reject(error);
            } });

        }).
        catch(function (error) {
          reject(error);
        });
      });
    },

    /**
        * 获取pusher 和 player 的截图
        * @param {Object} params userID streamType
        * @returns {Promise}
        */
    captureSnapshot: function captureSnapshot(params) {var _this9 = this;
      return new Promise(function (resolve, reject) {
        if (params.userID === _this9.pusher.userID) {
          // pusher
          _this9.pusher.getPusherContext().snapshot({
            quality: 'raw',
            complete: function complete(result) {
              console.log(TAG_NAME, 'snapshot pusher', result);

              if (result.tempImagePath) {
                resolve(result);
              } else {
                console.log('snapShot 回调失败', result);
                reject(new Error('截图失败'));
              }
            } });

        } else {
          // player
          _this9.userController.getStream(params).playerContext.snapshot({
            quality: 'raw',
            complete: function complete(result) {
              console.log(TAG_NAME, 'snapshot player', result);

              if (result.tempImagePath) {
                resolve(result);
              } else {
                console.log('snapShot 回调失败', result);
                reject(new Error('截图失败'));
              }
            } });

        }
      });
    },

    /**
        * 将远端视频全屏
        * @param {Object} params userID streamType direction
        * @returns {Promise}
        */
    enterFullscreen: function enterFullscreen(params) {var _this10 = this;
      console.log(TAG_NAME, 'enterFullscreen', params);
      return new Promise(function (resolve, reject) {
        _this10.userController.getStream(params).playerContext.requestFullScreen({
          direction: params.direction || 0,
          success: function success(event) {
            console.log(TAG_NAME, 'enterFullscreen success', event);
            resolve(event);
          },
          fail: function fail(event) {
            console.log(TAG_NAME, 'enterFullscreen fail', event);
            reject(event);
          } });

      });
    },

    /**
        * 将远端视频取消全屏
        * @param {Object} params userID streamType
        * @returns {Promise}
        */
    exitFullscreen: function exitFullscreen(params) {var _this11 = this;
      console.log(TAG_NAME, 'exitFullscreen', params);
      return new Promise(function (resolve, reject) {
        _this11.userController.getStream(params).playerContext.exitFullScreen({
          success: function success(event) {
            console.log(TAG_NAME, 'exitFullScreen success', event);
            resolve(event);
          },
          fail: function fail(event) {
            console.log(TAG_NAME, 'exitFullScreen fail', event);
            reject(event);
          } });

      });
    },

    /**
        * 设置 player 视图的横竖屏显示
        * @param {Object} params userID streamType orientation: vertical, horizontal
        * @returns {Promise}
        */
    setRemoteOrientation: function setRemoteOrientation(params) {
      return this.setPlayerConfigFun({
        userID: params.userID,
        streamType: params.streamType,
        config: {
          orientation: params.orientation } });


    },
    // 改为：
    setViewOrientation: function setViewOrientation(params) {
      return this.setPlayerConfigFun({
        userID: params.userID,
        streamType: params.streamType,
        config: {
          orientation: params.orientation } });


    },

    /**
        * 设置 player 视图的填充模式
        * @param {Object} params userID streamType fillMode: contain，fillCrop
        * @returns {Promise}
        */
    setRemoteFillMode: function setRemoteFillMode(params) {
      return this.setPlayerConfigFun({
        userID: params.userID,
        streamType: params.streamType,
        config: {
          objectFit: params.fillMode } });


    },
    // 改为：
    setViewFillMode: function setViewFillMode(params) {
      return this.setPlayerConfigFun({
        userID: params.userID,
        streamType: params.streamType,
        config: {
          objectFit: params.fillMode } });


    },

    /**
        * 切换 player 大小画面
        * @param {Object} params userID streamType definition: HD SD
        * @returns {Promise}
        */
    setRemoteDefinitionFun: function setRemoteDefinitionFun(params) {var _this12 = this;
      params.streamType = 'main';
      return new Promise(function (resolve, reject) {
        var stream = _this12.userController.getStream({
          userID: params.userID,
          streamType: params.streamType });


        if (stream && stream.streamType === 'main') {
          console.log(TAG_NAME, '_switchStreamType', stream.src); // stream.volume = volume

          if (stream.src.indexOf('main') > -1) {
            stream.src = stream.src.replace('main', 'small');
            stream._streamType = 'small'; // 用于设置面板的渲染
          } else if (stream.src.indexOf('small') > -1) {
            stream.src = stream.src.replace('small', 'main');
            stream._streamType = 'main';
          }

          console.log(TAG_NAME, '_switchStreamType', stream.src);
          _this12.setData(
          {
            streamList: _this12.streamList },

          function () {});

        }
      });
    },

    initStatusFun: function initStatusFun() {
      this.status = {
        isPush: false,
        // 推流状态
        isPending: false // 挂起状态，触发5000事件标记为true，onShow后标记为false
      };
      this._lastTapTime = 0;
      this._beforeLastTapTime = 0;
      this._isFullscreen = false;
    },

    /**
        * 设置推流参数并触发页面渲染更新
        * @param {Object} config live-pusher 的配置
        * @returns {Promise}
        */
    setPusherConfigFun: function setPusherConfigFun(config) {var _this13 = this;
      console.log(TAG_NAME, '_setPusherConfig', config, this.pusher);
      return new Promise(function (resolve, reject) {
        if (!_this13.pusher) {
          _this13.pusher = new _pusher.default(config);
        } else {
          Object.assign(_this13.pusher, config);
        }

        _this13.setData(
        {
          pusher: _this13.pusher },

        function () {
          // console.log(TAG_NAME, '_setPusherConfig setData compelete', 'config:', config, 'pusher:', this.data.pusher)
          resolve(config);
        });

      });
    },

    /**
        *
        * @param {Object} params include userID,streamType,config
        * @returns {Promise}
        */
    setPlayerConfigFun: function setPlayerConfigFun(params) {var _this14 = this;
      var userID = params.userID;
      var streamType = params.streamType;
      var config = params.config;
      console.log(TAG_NAME, '_setPlayerConfig', params);
      return new Promise(function (resolve, reject) {
        // 获取指定的userID streamType 的 stream
        var user = _this14.userController.getUser(userID);

        if (user && user.streams[streamType]) {
          user.streams[streamType] = Object.assign(user.streams[streamType], config); // user.streams引用的对象和 streamList 里的是同一个

          _this14.setData(
          {
            streamList: _this14.streamList },

          function () {
            // console.log(TAG_NAME, '_setPlayerConfig complete', params, 'streamList:', this.data.streamList)
            resolve(params);
          });

        } else {
          // 不需要reject，静默处理
          console.warn(TAG_NAME, '指定 userID 或者 streamType 不存在'); // reject(new Error('指定 userID 或者 streamType 不存在'))
        }
      });
    },

    /**
        * 必选参数检测
        * @param {Object} rtcConfig rtc参数
        * @returns {Boolean}
        */
    checkParamFun: function checkParamFun(rtcConfig) {
      console.log(TAG_NAME, 'checkParam config:', rtcConfig);

      if (!rtcConfig.sdkAppID) {
        console.error('未设置 sdkAppID');
        return false;
      }

      if (rtcConfig.roomID === undefined) {
        console.error('未设置 roomID');
        return false;
      }

      if (rtcConfig.roomID < 1 || rtcConfig.roomID > 4294967296) {
        console.error('roomID 超出取值范围 1 ~ 4294967295');
        return false;
      }

      if (!rtcConfig.userID) {
        console.error('未设置 userID');
        return false;
      }

      if (!rtcConfig.userSig) {
        console.error('未设置 userSig');
        return false;
      }

      if (!rtcConfig.template) {
        console.error('未设置 template');
        return false;
      }

      return true;
    },
    getPushUrlFun: function getPushUrlFun(rtcConfig) {
      // 拼接 puhser url rtmp 方案
      console.log(TAG_NAME, 'getPushUrl', rtcConfig);

      if (ENV.IS_TRTC) {
        // 版本高于7.0.8，基础库版本高于2.10.0 使用新的 url
        return new Promise(function (resolve, reject) {
          // appscene videocall live
          // cloudenv PRO CCC DEV UAT
          // encsmall 0
          // 对外的默认值是rtc ，对内的默认值是videocall
          rtcConfig.scene = !rtcConfig.scene || rtcConfig.scene === 'rtc' ? 'videocall' : 'live';
          rtcConfig.enableBlackStream = rtcConfig.enableBlackStream || 1;
          rtcConfig.encsmall = rtcConfig.encsmall || 0;
          rtcConfig.cloudenv = rtcConfig.cloudenv || 'PRO';
          setTimeout(function () {
            var pushUrl =
            'room://cloud.tencent.com/rtc?sdkappid=' +
            rtcConfig.sdkAppID +
            '&roomid=' +
            rtcConfig.roomID +
            '&userid=' +
            rtcConfig.userID +
            '&usersig=' +
            rtcConfig.userSig +
            '&appscene=' +
            rtcConfig.scene +
            '&encsmall=' +
            rtcConfig.encsmall +
            '&cloudenv=' +
            rtcConfig.cloudenv;
            console.log(TAG_NAME, 'getPushUrl result:', pushUrl);
            resolve(pushUrl);
          }, 0);
        });
      }

      return this.requestSigServerFun(rtcConfig);
    },

    /**
        * 获取签名和推流地址
        * @param {Object} rtcConfig 进房参数配置
        * @returns {Promise}
        */
    requestSigServerFun: function requestSigServerFun(rtcConfig) {
      console.log('requestSigServer:', rtcConfig);
      var sdkAppID = rtcConfig.sdkAppID;
      var userID = rtcConfig.userID;
      var userSig = rtcConfig.userSig;
      var roomID = rtcConfig.roomID;
      var privateMapKey = rtcConfig.privateMapKey;
      rtcConfig.useCloud = rtcConfig.useCloud === undefined ? true : rtcConfig.useCloud;
      var url = rtcConfig.useCloud ? 'https://official.opensso.tencent-cloud.com/v4/openim/jsonvideoapp' : 'https://yun.tim.qq.com/v4/openim/jsonvideoapp';
      url += '?sdkappid=' + sdkAppID + '&identifier=' + userID + '&usersig=' + userSig + '&random=' + Date.now() + '&contenttype=json';
      var reqHead = {
        Cmd: 1,
        SeqNo: 1,
        BusType: 7,
        GroupId: roomID };

      var reqBody = {
        PrivMapEncrypt: privateMapKey,
        TerminalType: 1,
        FromType: 3,
        SdkVersion: 26280566 };

      console.log('requestSigServer:', url, reqHead, reqBody);
      return new Promise(function (resolve, reject) {
        wx.request({
          url: url,
          data: {
            ReqHead: reqHead,
            ReqBody: reqBody },

          method: 'POST',
          success: function success(res) {
            console.log('requestSigServer success:', res);

            if (res.data['ErrorCode'] || res.data['RspHead']['ErrorCode'] !== 0) {
              // console.error(res.data['ErrorInfo'] || res.data['RspHead']['ErrorInfo'])
              console.error('获取roomsig失败');
              reject(res);
            }

            var roomSig = JSON.stringify(res.data['RspBody']);
            var pushUrl = 'room://cloud.tencent.com?sdkappid=' + sdkAppID + '&roomid=' + roomID + '&userid=' + userID + '&roomsig=' + encodeURIComponent(roomSig); // TODO 需要重新整理的逻辑
            // 如果有配置纯音频推流或者recordId参数

            if (rtcConfig.pureAudioPushMod || rtcConfig.recordId) {
              var bizbuf = {
                Str_uc_params: {
                  pure_audio_push_mod: 0,
                  record_id: 0 } };

              // 纯音频推流

              if (rtcConfig.pureAudioPushMod) {
                bizbuf.Str_uc_params.pure_audio_push_mod = rtcConfig.pureAudioPushMod;
              } else {
                delete bizbuf.Str_uc_params.pure_audio_push_mod;
              } // 自动录制时业务自定义id

              if (rtcConfig.recordId) {
                bizbuf.Str_uc_params.record_id = rtcConfig.recordId;
              } else {
                delete bizbuf.Str_uc_params.record_id;
              }

              pushUrl += '&bizbuf=' + encodeURIComponent(JSON.stringify(bizbuf));
            }

            console.log('roomSigInfo', pushUrl);
            resolve(pushUrl);
          },
          fail: function fail(res) {
            console.log('requestSigServer fail:', res);
            reject(res);
          } });

      });
    },
    doubleTabToggleFullscreenFun: function doubleTabToggleFullscreenFun(event) {var _this15 = this;
      var curTime = event.timeStamp;
      var lastTime = this._lastTapTime; // 已知问题：上次全屏操作后，必须等待1.5s后才能再次进行全屏操作，否则引发SDK全屏异常，因此增加节流逻辑

      var beforeLastTime = this._beforeLastTapTime;
      console.log(TAG_NAME, 'doubleTabToggleFullscreenFun', event, lastTime, beforeLastTime);

      if (curTime - lastTime > 0 && curTime - lastTime < 300 && lastTime - beforeLastTime > 1500) {
        var userID = event.currentTarget.dataset.userid;
        var streamType = event.currentTarget.dataset.streamtype;

        if (this._isFullscreen) {
          this.exitFullscreen({
            userID: userID,
            streamType: streamType }).

          then(function () {
            _this15._isFullscreen = false;
          }).
          catch(function () {});
        } else {
          // const stream = this.userController.getStream({ userID, streamType })
          var direction; // // 已知问题：视频的尺寸需要等待player触发NetStatus事件才能获取到，如果进房就双击全屏，全屏后的方向有可能不对。
          // if (stream && stream.videoWidth && stream.videoHeight) {
          //   // 如果是横视频，全屏时进行横屏处理。如果是竖视频，则为0
          //   direction = stream.videoWidth > stream.videoHeight ? 90 : 0
          // }

          this.enterFullscreen({
            userID: userID,
            streamType: streamType,
            direction: direction }).

          then(function () {
            _this15._isFullscreen = true;
          }).
          catch(function () {});
        }

        this._beforeLastTapTime = lastTime;
      }

      this._lastTapTime = curTime;
    },

    /**
        * TRTC-room 远端用户和音视频状态处理
        */
    bindEventFun: function bindEventFun() {var _this16 = this;
      // 远端用户进房
      this.userController.on(_constants.EVENT.REMOTE_USER_JOIN, function (event) {
        console.log(TAG_NAME, '远端用户进房', event, event.data.userID);

        var userid = event.data.userID;
        if (userid.split('_groupid')[1].substr(0, 1) == '3') {
          //this.$com.showToast({tip: '面试者进入'})
          console.log('面试者进入');
          // this.$req.modifyRoomId({
          // 	status: 3,
          // 	roomId: 
          // })
        }

        _this16.setData(
        {
          userList: event.data.userList },

        function () {
          _this16._emitter.emit(_constants.EVENT.REMOTE_USER_JOIN, {
            userID: event.data.userID });

        });


        //在streamList中添加gropuid
        // const stream = this.userController.getStream({
        // 	userID: event.data.userID,
        // 	streamType: ''
        // });
        // console.log('event.data.userID',event.data.userID)
        // console.log('stream',stream)
        // if (stream) {
        // 	this.$req.getUserInfo({
        // 		openid: event.data.userID
        // 	}).then(ret => {
        // 		stream.groupid = ret.groupid;
        // 		this.setData(
        // 			{
        // 				streamList: this.streamList
        // 			},
        // 			() => {}
        // 		);
        // 		console.log('streamList-custom:', this.streamList, 'userList:', this.userList);
        // 	})
        // }

        console.log(TAG_NAME, 'REMOTE_USER_JOIN', 'streamList:', _this16.streamList, 'userList:', _this16.userList);
      }); // 远端用户离开

      this.userController.on(_constants.EVENT.REMOTE_USER_LEAVE, function (event) {
        console.log(TAG_NAME, '远端用户离开', event, event.data.userID);
        var userid = event.data.userID;
        if (userid.split('_groupid')[1].substr(0, 1) == '3') {
          //this.$com.showToast({tip: '面试者离开，请打分'})
          //this.clock = '已结束';
          _this16.over = true;
          // this.$req.modifyRoomId({
          // 	status: 4,
          // 	roomNO: this.config.roomID
          // })
        }

        if (event.data.userID) {
          _this16.setData(
          {
            userList: event.data.userList,
            streamList: event.data.streamList },

          function () {
            _this16._emitter.emit(_constants.EVENT.REMOTE_USER_LEAVE, {
              userID: event.data.userID });

          });

        }

        console.log(TAG_NAME, 'REMOTE_USER_LEAVE', 'streamList:', _this16.streamList, 'userList:', _this16.userList);
      }); // 视频状态 true

      this.userController.on(_constants.EVENT.REMOTE_VIDEO_ADD, function (event) {
        console.log(TAG_NAME, '远端视频可用', event, event.data.stream.userID);
        var stream = event.data.stream;
        _this16.setData(
        {
          userList: event.data.userList,
          streamList: event.data.streamList },

        function () {
          // 完善 的stream 的 playerContext
          stream.playerContext = wx.createLivePlayerContext(stream.streamID, _this16); // 新增的需要触发一次play 默认属性才能生效
          // stream.playerContext.play()
          // console.log(TAG_NAME, 'REMOTE_VIDEO_ADD playerContext.play()', stream)
          // TODO 视频通话模版默认订阅且显示

          _this16._emitter.emit(_constants.EVENT.REMOTE_VIDEO_ADD, {
            userID: stream.userID,
            streamType: stream.streamType });

        });

        console.log(TAG_NAME, 'REMOTE_VIDEO_ADD', 'streamList:', _this16.streamList, 'userList:', _this16.userList);
      }); // 视频状态 false

      this.userController.on(_constants.EVENT.REMOTE_VIDEO_REMOVE, function (event) {
        console.log(TAG_NAME, '远端视频移除', event, event.data.stream.userID);
        var stream = event.data.stream;
        _this16.setData(
        {
          userList: event.data.userList,
          streamList: event.data.streamList },

        function () {
          // 有可能先触发了退房事件，用户名下的所有stream都已清除
          if (stream.userID && stream.streamType) {
            _this16._emitter.emit(_constants.EVENT.REMOTE_VIDEO_REMOVE, {
              userID: stream.userID,
              streamType: stream.streamType });

          }
        });

        console.log(TAG_NAME, 'REMOTE_VIDEO_REMOVE', 'streamList:', _this16.streamList, 'userList:', _this16.userList);
      }); // 音频可用

      this.userController.on(_constants.EVENT.REMOTE_AUDIO_ADD, function (event) {
        console.log(TAG_NAME, '远端音频可用', event);
        var stream = event.data.stream;
        _this16.setData(
        {
          userList: event.data.userList,
          streamList: event.data.streamList },

        function () {
          stream.playerContext = wx.createLivePlayerContext(stream.streamID, _this16); // 新增的需要触发一次play 默认属性才能生效
          // stream.playerContext.play()
          // console.log(TAG_NAME, 'REMOTE_AUDIO_ADD playerContext.play()', stream)

          _this16._emitter.emit(_constants.EVENT.REMOTE_AUDIO_ADD, {
            userID: stream.userID,
            streamType: stream.streamType });

        });

        console.log(TAG_NAME, 'REMOTE_AUDIO_ADD', 'streamList:', _this16.streamList, 'userList:', _this16.userList);
      }); // 音频不可用

      this.userController.on(_constants.EVENT.REMOTE_AUDIO_REMOVE, function (event) {
        console.log(TAG_NAME, '远端音频移除', event, event.data.stream.userID);
        var stream = event.data.stream;
        _this16.setData(
        {
          userList: event.data.userList,
          streamList: event.data.streamList },

        function () {
          // 有可能先触发了退房事件，用户名下的所有stream都已清除
          if (stream.userID && stream.streamType) {
            _this16._emitter.emit(_constants.EVENT.REMOTE_AUDIO_REMOVE, {
              userID: stream.userID,
              streamType: stream.streamType });

          }
        });

        console.log(TAG_NAME, 'REMOTE_AUDIO_REMOVE', 'streamList:', _this16.streamList, 'userList:', _this16.userList);
      });
    },

    /**
        * pusher event handler
        * @param {*} event 事件实例
        */
    pusherStateChangeHandlerFun: function pusherStateChangeHandlerFun(event) {var _this17 = this;
      var code = event.detail.code;
      var message = event.detail.message;
      console.log(TAG_NAME, 'pusherStateChange：', code, event);

      switch (code) {
        case 0:
          console.log(message, code);
          break;

        case 1001:
          console.log('已经连接推流服务器', code);
          break;

        case 1002:
          console.log('已经与服务器握手完毕,开始推流', code);
          break;

        case 1003:
          console.log('打开摄像头成功', code);
          break;

        case 1004:
          console.log('录屏启动成功', code);
          break;

        case 1005:
          console.log('推流动态调整分辨率', code);
          break;

        case 1006:
          console.log('推流动态调整码率', code);
          break;

        case 1007:
          console.log('首帧画面采集完成', code);
          break;

        case 1008:
          console.log('编码器启动', code);
          break;

        case 1018:
          console.log('进房成功', code);

          this._emitter.emit(_constants.EVENT.LOCAL_JOIN, {
            userID: this.pusher.userID });


          break;

        case 1019:
          console.log('退出房间', code);

          this._emitter.emit(_constants.EVENT.LOCAL_LEAVE, {
            userID: this.pusher.userID });


          break;

        case 2003:
          console.log('渲染首帧视频', code);
          break;

        case 1020:
        case 1031:
        case 1032:
        case 1033:
        case 1034:
          // 通过 userController 处理 1020 1031 1032 1033 1034
          this.userController.userEventHandler(event);
          break;

        case -1301:
          console.error('打开摄像头失败: ', code);

          this._emitter.emit(_constants.EVENT.ERROR, {
            code: code,
            message: message });


          break;

        case -1302:
          console.error('打开麦克风失败: ', code);

          this._emitter.emit(_constants.EVENT.ERROR, {
            code: code,
            message: message });


          break;

        case -1303:
          console.error('视频编码失败: ', code);

          this._emitter.emit(_constants.EVENT.ERROR, {
            code: code,
            message: message });


          break;

        case -1304:
          console.error('音频编码失败: ', code);

          this._emitter.emit(_constants.EVENT.ERROR, {
            code: code,
            message: message });


          break;

        case -1307:
          console.error('推流连接断开: ', code);

          this._emitter.emit(_constants.EVENT.ERROR, {
            code: code,
            message: message });


          break;

        case -100018:
          console.error('进房失败: ', code, message);

          this._emitter.emit(_constants.EVENT.ERROR, {
            code: code,
            message: message });


          break;

        case 5000:
          console.log('小程序被挂起: ', code); // 终端 sdk 建议执行退房操作，唤起时重新进房，临时解决方案，待小程序SDK完全实现自动重新推流后可以去掉

          this.status.isPending = true;

          if (this.status.isPush) {
            // this.exitRoom()
            var tempUrl = this.pusher.url;
            this.pusher.url = ''; // console.log('5000 小程序被挂起后更换pusher', this.data.pusher.getPusherContext().webviewId)

            this.setData(
            {
              pusher: this.pusher },

            function () {
              _this17.pusher.url = tempUrl;
              _this17.setData(
              {
                pusher: _this17.pusher },

              function () {
                _this17.pusher.getPusherContext().start();
                console.log('5000 小程序被挂起后更换pusher', _this17.pusher);
              });

            });

          }

          break;

        case 1021:
          console.log('网络类型发生变化，需要重新进房', code);
          break;

        case 2007:
          console.log('本地视频播放loading: ', code);
          break;

        case 2004:
          console.log('本地视频播放开始: ', code);
          break;

        default:
          console.log(message, code);}


      this._emitter.emit(_constants.EVENT.LOCAL_STATE_UPDATE, {
        data: event });

    },
    pusherNetStatusHandlerFun: function pusherNetStatusHandlerFun(event) {
      // 触发 LOCAL_NET_STATE_UPDATE
      this._emitter.emit(_constants.EVENT.LOCAL_NET_STATE_UPDATE, event);
    },
    pusherErrorHandlerFun: function pusherErrorHandlerFun(event) {
      // 触发 ERROR
      console.warn(TAG_NAME, 'pusher error', event);

      try {
        var code = event.detail.errCode;
        var message = event.detail.errMsg;

        this._emitter.emit(_constants.EVENT.ERROR, {
          code: code,
          message: message });

      } catch (exception) {
        console.error(TAG_NAME, 'pusher error data parser exception', event, exception);
      }
    },
    pusherBGMStartHandlerFun: function pusherBGMStartHandlerFun(event) {
      // 触发 BGM_START 已经在playBGM方法中进行处理
      // this._emitter.emit(EVENT.BGM_PLAY_START, { data: event })
    },
    pusherBGMProgressHandlerFun: function pusherBGMProgressHandlerFun(event) {
      // BGM_PROGRESS
      this._emitter.emit(_constants.EVENT.BGM_PLAY_PROGRESS, event);
    },
    pusherBGMCompleteHandlerFun: function pusherBGMCompleteHandlerFun(event) {
      // BGM_COMPLETE
      this._emitter.emit(_constants.EVENT.BGM_PLAY_COMPLETE, event);
    },
    // player event handler
    // 获取 player ID 再进行触发
    playerStateChangeFun: function playerStateChangeFun(event) {
      // console.log(TAG_NAME, 'playerStateChangeFun', event)
      this._emitter.emit(_constants.EVENT.REMOTE_STATE_UPDATE, event);
    },
    playerFullscreenChangeFun: function playerFullscreenChangeFun(event) {
      // console.log(TAG_NAME, '_playerFullscreenChange', event)
      this._emitter.emit(_constants.EVENT.REMOTE_NET_STATE_UPDATE, event);
    },
    playerNetStatusFun: function playerNetStatusFun(event) {
      // console.log(TAG_NAME, 'playerNetStatusFun', event)
      // 获取player 视频的宽高
      var stream = this.userController.getStream({
        userID: event.currentTarget.dataset.userid,
        streamType: event.currentTarget.dataset.streamtype });


      if (stream && (stream.videoWidth !== event.detail.info.videoWidth || stream.videoHeight !== event.detail.info.videoHeight)) {
        console.log(TAG_NAME, 'playerNetStatusFun update video size', event);
        stream.videoWidth = event.detail.info.videoWidth;
        stream.videoHeight = event.detail.info.videoHeight;
      }

      this._emitter.emit(_constants.EVENT.REMOTE_FULLSCREEN_UPDATE, event);
    },
    playerAudioVolumeNotifyFun: function playerAudioVolumeNotifyFun(event) {
      // console.log(TAG_NAME, 'playerAudioVolumeNotifyFun', event)
      this._emitter.emit(_constants.EVENT.REMOTE_AUDIO_VOLUME_UPDATE, event);
    },

    /**
        * 监听组件属性变更，外部变更组件属性时触发该监听，用于检查属性设置是否正常
        * @param {Object} data 变更数据
        */
    propertyObserverFun: function propertyObserverFun(data) {
      console.log(TAG_NAME, '_propertyObserver', data, this.config);

      if (data.name === 'config') {
        // const config = Object.assign(DEFAULT_PUSHER_CONFIG, data.newVal)
        var config = data.newVal; // querystring 只支持String类型，做一个类型防御

        if (typeof config.debugMode === 'string') {
          config.debugMode === 'true' ? true : false;
        } // 独立设置与pusher无关的配置

        this.setData({
          template: config.template,
          debugMode: config.debugMode || false,
          debug: config.debugMode || false });

        this.setPusherConfigFun(config);
      }
    },

    toggleVideoFun: function toggleVideoFun() {
      if (this.pusher.enableCamera) {
        this.unpublishLocalVideo();
      } else {
        this.publishLocalVideo();
      }
    },

    toggleAudioFun: function toggleAudioFun() {
      if (this.pusher.enableMic) {
        this.unpublishLocalAudio();
      } else {
        this.publishLocalAudio();
      }
    },

    debugToggleRemoteVideoFun: function debugToggleRemoteVideoFun(event) {
      console.log(TAG_NAME, '_debugToggleRemoteVideo', event.currentTarget.dataset);
      var userID = event.currentTarget.dataset.userID;
      var streamType = event.currentTarget.dataset.streamType;
      var stream = this.streamList.find(function (item) {
        return item.userID === userID && item.streamType === streamType;
      });

      if (stream.muteVideo) {
        this.subscribeRemoteVideo({
          userID: userID,
          streamType: streamType });

        this.setViewVisible({
          userID: userID,
          streamType: streamType,
          isVisible: true });

      } else {
        this.unsubscribeRemoteVideo({
          userID: userID,
          streamType: streamType });

        this.setViewVisible({
          userID: userID,
          streamType: streamType,
          isVisible: false });

      }
    },

    debugToggleRemoteAudioFun: function debugToggleRemoteAudioFun(event) {
      console.log(TAG_NAME, '_debugToggleRemoteAudio', event.currentTarget.dataset);
      var userID = event.currentTarget.dataset.userID;
      var streamType = event.currentTarget.dataset.streamType;
      var stream = this.streamList.find(function (item) {
        return item.userID === userID && item.streamType === streamType;
      });

      if (stream.muteAudio) {
        this.subscribeRemoteAudio({
          userID: userID });

      } else {
        this.unsubscribeRemoteAudio({
          userID: userID });

      }
    },

    debugToggleVideoDebugFun: function debugToggleVideoDebugFun() {
      this.setData({
        debug: !this.debug });

    },

    debugExitRoomFun: function debugExitRoomFun() {
      this.exitRoom();
    },

    debugEnterRoomFun: function debugEnterRoomFun() {
      this.publishLocalVideo();
      this.publishLocalAudio();
      this.enterRoom({
        roomID: this.config.roomID }).
      then(function () {
        // 进房后开始推送视频或音频
      });
    },

    debugGoBackFun: function debugGoBackFun() {
      wx.navigateBack({
        delta: 1 });

    },

    debugTogglePanelFun: function debugTogglePanelFun() {
      this.setData({
        debugPanel: !this.debugPanel });

    },

    toggleAudioVolumeTypeFun: function toggleAudioVolumeTypeFun() {
      if (this.pusher.audioVolumeType === 'voicecall') {
        this.setPusherConfigFun({
          audioVolumeType: 'media' });

      } else {
        this.setPusherConfigFun({
          audioVolumeType: 'voicecall' });

      }
    },

    toggleSoundModeFun: function toggleSoundModeFun() {
      if (this.userList.length === 0) {
        return;
      }

      var stream = this.userController.getStream({
        userID: this.userList[0].userID,
        streamType: 'main' });


      if (stream) {
        if (stream.soundMode === 'speaker') {
          stream['soundMode'] = 'ear';
        } else {
          stream['soundMode'] = 'speaker';
        }

        this.setPlayerConfigFun({
          userID: stream.userID,
          streamType: 'main',
          config: {
            soundMode: stream['soundMode'] } });


      }
    },

    /**
        * 退出通话
        */
    hangUpFun: function hangUpFun() {
      //this.exitRoom();
      this.$com.link('/pages/index/index');
      // wx.navigateBack({
      // 	delta: 1
      // });
    },

    /**
        * 切换订阅音频状态
        */
    handleSubscribeAudio: function handleSubscribeAudio() {
      if (this.pusher.enableMic) {
        this.unpublishLocalAudio();
      } else {
        this.publishLocalAudio();
      }
    },

    /**
        * 切换订阅远端视频状态
        * @param event
        */
    handleSubscribeRemoteVideoFun: function handleSubscribeRemoteVideoFun(event) {
      var userID = event.currentTarget.dataset.userID;
      var streamType = event.currentTarget.dataset.streamType;
      var stream = this.streamList.find(function (item) {
        return item.userID === userID && item.streamType === streamType;
      });

      if (stream.muteVideo) {
        this.subscribeRemoteVideo({
          userID: userID,
          streamType: streamType });

      } else {
        this.unsubscribeRemoteVideo({
          userID: userID,
          streamType: streamType });

      }
    },

    /**
        * 将远端视频取消全屏
        * @param event
        */
    handleSubscribeRemoteAudioFun: function handleSubscribeRemoteAudioFun(event) {
      var userID = event.currentTarget.dataset.userID;
      var streamType = event.currentTarget.dataset.streamType;
      var stream = this.streamList.find(function (item) {
        return item.userID === userID && item.streamType === streamType;
      });

      if (stream.muteAudio) {
        this.subscribeRemoteAudio({
          userID: userID });

      } else {
        this.unsubscribeRemoteAudio({
          userID: userID });

      }
    },

    /**
        * grid布局, 唤起 memberlist-panel
        */
    switchMemberListPanelFun: function switchMemberListPanelFun() {
      this.setData({
        panelName: this.panelName !== 'memberlist-panel' ? 'memberlist-panel' : '' });

    },

    /**
        * grid布局, 唤起setting-panel
        */
    switchSettingPanelFun: function switchSettingPanelFun() {
      this.setData({
        panelName: this.panelName !== 'setting-panel' ? 'setting-panel' : '' });

    },

    handleMaskerClickFun: function handleMaskerClickFun() {
      this.setData({
        panelName: '' });

    },

    setPuserPropertyFun: function setPuserPropertyFun(event) {
      // console.log(TAG_NAME, '_setPuserProperty', event)
      var key = event.currentTarget.dataset.key;
      var value = event.currentTarget.dataset.value;
      var config = {};

      if (value === 'true') {
        value = true;
      } else if (value === 'false') {
        value = false;
      }

      if (typeof value === 'boolean') {
        config[key] = !this.pusher[key];
      } else if (typeof value === 'string' && value.indexOf('|') > 0) {
        value = value.split('|');

        if (this.pusher[key] === value[0]) {
          config[key] = value[1];
        } else {
          config[key] = value[0];
        }
      } // console.log(TAG_NAME, '_setPuserProperty', config)

      this.setPusherConfigFun(config);
    },

    setPlayerPropertyFun: function setPlayerPropertyFun(event) {
      console.log(TAG_NAME, '_setPlayerProperty', event);
      var userID = event.currentTarget.dataset.userid;
      var streamType = event.currentTarget.dataset.streamtype;
      var key = event.currentTarget.dataset.key;
      var value = event.currentTarget.dataset.value;
      var stream = this.userController.getStream({
        userID: userID,
        streamType: streamType });


      if (!stream) {
        return;
      }

      var config = {};

      if (value === 'true') {
        value = true;
      } else if (value === 'false') {
        value = false;
      }

      if (typeof value === 'boolean') {
        config[key] = !stream[key];
      } else if (typeof value === 'string' && value.indexOf('|') > 0) {
        value = value.split('|');

        if (stream[key] === value[0]) {
          config[key] = value[1];
        } else {
          config[key] = value[0];
        }
      }

      console.log(TAG_NAME, '_setPlayerProperty', config);
      this.setPlayerConfigFun({
        userID: userID,
        streamType: streamType,
        config: config });

    },

    switchStreamTypeFun: function switchStreamTypeFun(event) {
      var userID = event.currentTarget.dataset.userid;
      var streamType = event.currentTarget.dataset.streamtype;
      var stream = this.userController.getStream({
        userID: userID,
        streamType: streamType });


      if (stream && stream.streamType === 'main') {
        if (stream._definitionType === 'small') {
          this.subscribeRemoteVideo({
            userID: userID,
            streamType: 'main' });

        } else {
          this.subscribeRemoteVideo({
            userID: userID,
            streamType: 'small' });

        }
      }
    },

    handleSnapshotClickFun: function handleSnapshotClickFun(event) {
      wx.showToast({
        title: '开始截屏',
        icon: 'none',
        duration: 1000 });

      var userID = event.currentTarget.dataset.userid;
      var streamType = event.currentTarget.dataset.streamtype;
      this.snapshot({
        userID: userID,
        streamType: streamType });

    },

    /**
        * grid布局, 绑定事件
        */
    bindEventGridFun: function bindEventGridFun() {var _this18 = this;
      // 远端音量变更
      this.on(_constants.EVENT.REMOTE_AUDIO_VOLUME_UPDATE, function (event) {
        var data = event.data;
        var userID = data.currentTarget.dataset.userid;
        var streamType = data.currentTarget.dataset.streamtype;
        var volume = data.detail.volume; // console.log(TAG_NAME, '远端音量变更', userID, streamType, volume)

        var stream = _this18.userController.getStream({
          userID: userID,
          streamType: streamType });


        if (stream) {
          stream.volume = volume;
        }

        _this18.setData(
        {
          streamList: _this18.streamList },

        function () {});

      });
    },

    toggleFullscreenFun: function toggleFullscreenFun(event) {var _this19 = this;
      console.log(TAG_NAME, '_toggleFullscreen', event);
      var userID = event.currentTarget.dataset.userID;
      var streamType = event.currentTarget.dataset.streamType;

      if (this._isFullscreen) {
        this.exitFullscreen({
          userID: userID,
          streamType: streamType }).

        then(function () {
          _this19._isFullscreen = false;
        }).
        catch(function () {});
      } else {
        // const stream = this.userController.getStream({ userID, streamType })
        var direction = 0; // 已知问题：视频的尺寸需要等待player触发NetStatus事件才能获取到，如果进房就双击全屏，全屏后的方向有可能不对。
        // if (stream && stream.videoWidth && stream.videoHeight) {
        //   // 如果是横视频，全屏时进行横屏处理。如果是竖视频，则为0
        //   direction = stream.videoWidth > stream.videoHeight ? 90 : 0
        // }

        this.enterFullscreen({
          userID: userID,
          streamType: streamType,
          direction: direction }).

        then(function () {
          _this19._isFullscreen = true;
        }).
        catch(function () {});
      }
    } } };exports.default = _default2;

/***/ }),

/***/ 141:
/*!******************************************************************************************************************************************************************!*\
  !*** D:/job/bigwoods/KunLin/trtc-school/program/school-face-to-face/school-face-to-face-mp/components/trtc-room/trtc-room.vue?vue&type=style&index=0&lang=less& ***!
  \******************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _software_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_software_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_10_oneOf_1_2_software_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_software_HBuilderX_plugins_uniapp_cli_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_4_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_10_oneOf_1_5_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_trtc_room_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--10-oneOf-1-2!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--10-oneOf-1-3!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--10-oneOf-1-5!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./trtc-room.vue?vue&type=style&index=0&lang=less& */ 142);
/* harmony import */ var _software_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_software_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_10_oneOf_1_2_software_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_software_HBuilderX_plugins_uniapp_cli_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_4_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_10_oneOf_1_5_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_trtc_room_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_software_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_software_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_10_oneOf_1_2_software_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_software_HBuilderX_plugins_uniapp_cli_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_4_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_10_oneOf_1_5_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_trtc_room_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _software_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_software_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_10_oneOf_1_2_software_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_software_HBuilderX_plugins_uniapp_cli_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_4_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_10_oneOf_1_5_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_trtc_room_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _software_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_software_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_10_oneOf_1_2_software_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_software_HBuilderX_plugins_uniapp_cli_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_4_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_10_oneOf_1_5_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_trtc_room_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_software_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_software_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_1_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_10_oneOf_1_2_software_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_software_HBuilderX_plugins_uniapp_cli_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_4_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_10_oneOf_1_5_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_software_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_trtc_room_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 142:
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--10-oneOf-1-2!./node_modules/postcss-loader/src??ref--10-oneOf-1-3!./node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--10-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/job/bigwoods/KunLin/trtc-school/program/school-face-to-face/school-face-to-face-mp/components/trtc-room/trtc-room.vue?vue&type=style&index=0&lang=less& ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
    if(false) { var cssReload; }
  

/***/ })

}]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/components/trtc-room/trtc-room.js.map
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/trtc-room/trtc-room-create-component',
    {
        'components/trtc-room/trtc-room-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('1')['createComponent'](__webpack_require__(128))
        })
    },
    [['components/trtc-room/trtc-room-create-component']]
]);
