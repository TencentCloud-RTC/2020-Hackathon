module.exports=function(){if(typeof Array.prototype.forEach!="function"){Array.prototype.forEach=function(e){for(var t=0;t<this.length;t++){e.apply(this,[this[t],t,this])}}}var e={};var t={login:function(e,t,n){},syncMsgs:function(e,t){},getC2CHistoryMsgs:function(e,t,n){},syncGroupMsgs:function(e,t,n){},sendMsg:function(e,t,n){},logout:function(e,t){},setAutoRead:function(e,t,n){},getProfilePortrait:function(e,t,n){},setProfilePortrait:function(e,t,n){},applyAddFriend:function(e,t,n){},getPendency:function(e,t,n){},deletePendency:function(e,t,n){},responseFriend:function(e,t,n){},getAllFriend:function(e,t,n){},deleteFriend:function(e,t,n){},addBlackList:function(e,t,n){},getBlackList:function(e,t,n){},deleteBlackList:function(e,t,n){},uploadPic:function(e,t,n){},createGroup:function(e,t,n){},applyJoinGroup:function(e,t,n){},handleApplyJoinGroup:function(e,t,n){},deleteApplyJoinGroupPendency:function(e,t,n){},quitGroup:function(e,t,n){},getGroupPublicInfo:function(e,t,n){},getGroupInfo:function(e,t,n){},modifyGroupBaseInfo:function(e,t,n){},destroyGroup:function(e,t,n){},getJoinedGroupListHigh:function(e,t,n){},getGroupMemberInfo:function(e,t,n){},addGroupMember:function(e,t,n){},modifyGroupMember:function(e,t,n){},forbidSendMsg:function(e,t,n){},deleteGroupMember:function(e,t,n){},getPendencyGroup:function(e,t,n){},getPendencyReport:function(e,t,n){},getPendencyGroupRead:function(e,t,n){},sendCustomGroupNotify:function(e,t,n){},Msg:function(e,t,n,r,o,i,a,u,s){},MsgStore:{sessMap:function(){return{}},sessCount:function(){return 0},sessByTypeId:function(e,t){return{}},delSessByTypeId:function(e,t){return true},resetCookieAndSyncFlag:function(){},downloadMap:{}}};(function(t){var n={VERSION:"1.7.2",APPID:"537048168",PLAATFORM:"10"};var r=true;var o=true;var i={FORMAL:{COMMON:"https://webim.tim.qq.com",PIC:"https://pic.tim.qq.com"},TEST:{COMMON:"https://test.tim.qq.com",PIC:"https://pic.tim.qq.com"}};var a={};var u=false;var s={OPEN_IM:"openim",GROUP:"group_open_http_svc",FRIEND:"sns",PROFILE:"profile",RECENT_CONTACT:"recentcontact",PIC:"openpic",BIG_GROUP:"group_open_http_noauth_svc",BIG_GROUP_LONG_POLLING:"group_open_long_polling_http_noauth_svc",IM_OPEN_STAT:"imopenstat",DEL_CHAT:"recentcontact",WEB_IM:"webim"};var l={openim:"v4",group_open_http_svc:"v4",sns:"v4",profile:"v4",recentcontact:"v4",openpic:"v4",group_open_http_noauth_svc:"v1",group_open_long_polling_http_noauth_svc:"v1",imopenstat:"v4",webim:"v3"};var c={login:1,pic_up:3,apply_join_group:9,create_group:10,longpolling:18,send_group_msg:19,sendmsg:20};var f={C2C:"C2C",GROUP:"GROUP"};var p={C2C:1,GROUP:2};var d={C2C:12e3,GROUP:8898};var g={OK:"OK",FAIL:"FAIL"};var m=99999;var I={TEXT:"TIMTextElem",FACE:"TIMFaceElem",IMAGE:"TIMImageElem",CUSTOM:"TIMCustomElem",SOUND:"TIMSoundElem",FILE:"TIMFileElem",LOCATION:"TIMLocationElem",GROUP_TIP:"TIMGroupTipElem"};var M={ORIGIN:1,LARGE:2,SMALL:3};var E={JPG:1,JPEG:1,GIF:2,PNG:3,BMP:4,UNKNOWN:255};var _={RAW_DATA:0,BASE64_DATA:1};var v={BUSSINESS_ID:"10001",AUTH_KEY:"617574686b6579",SERVER_IP:"182.140.186.147",SOUND_SERVER_DOMAIN:"grouptalk.c2c.qq.com"};var y={SOUND:2106,FILE:2107};var h={IMAGE:1,FILE:2,SHORT_VIDEO:3,SOUND:4};var T={APP_VERSION:"2.1",SERVER_VERSION:1};var C={C2C:1,GROUP_COMMON:3,GROUP_TIP:4,GROUP_SYSTEM:5,GROUP_TIP2:6,FRIEND_NOTICE:7,PROFILE_NOTICE:8,C2C_COMMON:9,C2C_EVENT:10};var A={COMMON:0};var S={READED:92,KICKEDOUT:96};var G={COMMON:0,LOVEMSG:1,TIP:2,REDPACKET:3};var F={REDPACKET:1,COMMON:2,LOVEMSG:3};var O={JOIN:1,QUIT:2,KICK:3,SET_ADMIN:4,CANCEL_ADMIN:5,MODIFY_GROUP_INFO:6,MODIFY_MEMBER_INFO:7};var R={FACE_URL:1,NAME:2,OWNER:3,NOTIFICATION:4,INTRODUCTION:5};var N={JOIN_GROUP_REQUEST:1,JOIN_GROUP_ACCEPT:2,JOIN_GROUP_REFUSE:3,KICK:4,DESTORY:5,CREATE:6,INVITED_JOIN_GROUP_REQUEST:7,QUIT:8,SET_ADMIN:9,CANCEL_ADMIN:10,REVOKE:11,READED:15,CUSTOM:255,INVITED_JOIN_GROUP_REQUEST_AGREE:12};var P={FRIEND_ADD:1,FRIEND_DELETE:2,PENDENCY_ADD:3,PENDENCY_DELETE:4,BLACK_LIST_ADD:5,BLACK_LIST_DELETE:6,PENDENCY_REPORT:7,FRIEND_UPDATE:8};var b={PROFILE_MODIFY:1};var U={OK:0,SIGNATURE_EXPIRATION:11};var L={INIT:-1,ON:0,RECONNECT:1,OFF:9999};var D={GROUP_MSG:1,C2C_MSG:2,USER_HEAD:3,GROUP_HEAD:4};var k={ING:14,STOP:15};var w=15e3;var B=1e3;var q=5e3;var x=10;var K=L.INIT;var H=false;var z=0;var J=6e4;var V=5e3;var Y=60008;var X=91101;var j=10018;var W=null;var Q=0;var $=10;var Z=0;var ee=20;var te=0;var ne=[];var re=null;var oe=null;var ie={};var ae={sdkAppID:null,appIDAt3rd:null,accountType:null,identifier:null,tinyid:null,identifierNick:null,userSig:null,a2:null,contentType:"json",apn:1};var ue={};var se=0;var le={};var ce=0;var fe=[];var pe=[];var de=20;var ge=[];var me={downloadMap:{}};var Ie={"[惊讶]":0,"[撇嘴]":1,"[色]":2,"[发呆]":3,"[得意]":4,"[流泪]":5,"[害羞]":6,"[闭嘴]":7,"[睡]":8,"[大哭]":9,"[尴尬]":10,"[发怒]":11,"[调皮]":12,"[龇牙]":13,"[微笑]":14,"[难过]":15,"[酷]":16,"[冷汗]":17,"[抓狂]":18,"[吐]":19,"[偷笑]":20,"[可爱]":21,"[白眼]":22,"[傲慢]":23,"[饿]":24,"[困]":25,"[惊恐]":26,"[流汗]":27,"[憨笑]":28,"[大兵]":29,"[奋斗]":30,"[咒骂]":31,"[疑问]":32,"[嘘]":33,"[晕]":34};var Me={};var Ee=new function(){this.formatTimeStamp=function(e,t){if(!e){return 0}var n;t=t||"yyyy-MM-dd hh:mm:ss";var r=new Date(e*1e3);var o={"M+":r.getMonth()+1,"d+":r.getDate(),"h+":r.getHours(),"m+":r.getMinutes(),"s+":r.getSeconds()};if(/(y+)/.test(t)){n=t.replace(RegExp.$1,(r.getFullYear()+"").substr(4-RegExp.$1.length))}else{n=t}for(var i in o){if(new RegExp("("+i+")").test(n))n=n.replace(RegExp.$1,RegExp.$1.length==1?o[i]:("00"+o[i]).substr((""+o[i]).length))}return n};this.groupTypeEn2Ch=function(e){var t=null;switch(e){case"Public":t="公开群";break;case"ChatRoom":t="聊天室";break;case"Private":t="私有群";break;case"AVChatRoom":t="直播聊天室";break;default:t=e;break}return t};this.groupTypeCh2En=function(e){var t=null;switch(e){case"公开群":t="Public";break;case"聊天室":t="ChatRoom";break;case"私有群":t="Private";break;case"直播聊天室":t="AVChatRoom";break;default:t=e;break}return t};this.groupRoleEn2Ch=function(e){var t=null;switch(e){case"Member":t="成员";break;case"Admin":t="管理员";break;case"Owner":t="群主";break;default:t=e;break}return t};this.groupRoleCh2En=function(e){var t=null;switch(e){case"成员":t="Member";break;case"管理员":t="Admin";break;case"群主":t="Owner";break;default:t=e;break}return t};this.groupMsgFlagEn2Ch=function(e){var t=null;switch(e){case"AcceptAndNotify":t="接收并提示";break;case"AcceptNotNotify":t="接收不提示";break;case"Discard":t="屏蔽";break;default:t=e;break}return t};this.groupMsgFlagCh2En=function(e){var t=null;switch(e){case"接收并提示":t="AcceptAndNotify";break;case"接收不提示":t="AcceptNotNotify";break;case"屏蔽":t="Discard";break;default:t=e;break}return t};this.formatText2Html=function(e){var t=e;if(t){t=this.xssFilter(t);t=t.replace(/ /g,"&nbsp;");t=t.replace(/\n/g,"<br/>")}return t};this.formatHtml2Text=function(e){var t=e;if(t){t=t.replace(/&nbsp;/g," ");t=t.replace(/<br\/>/g,"\n")}return t};this.getStrBytes=function(e){if(e==null||e===undefined)return 0;if(typeof e!="string"){return 0}var t=0,n,r,o;for(r=0,o=e.length;r<o;r++){n=e.charCodeAt(r);if(n<=127){t+=1}else if(n<=2047){t+=2}else if(n<=65535){t+=3}else{t+=4}}return t};this.xssFilter=function(e){if(o){e=e.toString();e=e.replace(/[<]/g,"&lt;");e=e.replace(/[>]/g,"&gt;");e=e.replace(/"/g,"&quot;")}return e};this.trimStr=function(e){if(!e)return"";e=e.toString();return e.replace(/(^\s*)|(\s*$)/g,"")};this.validNumber=function(e){e=e.toString();return e.match(/(^\d{1,8}$)/g)};this.getReturnError=function(e,t){if(!t){t=-100}var n={ActionStatus:g.FAIL,ErrorCode:t,ErrorInfo:e+"["+t+"]"};return n};this.replaceObject=function(e,t){for(var n in t){if(e[n]){t[e[n]]=t[n];delete t[n];if(t[e[n]]instanceof Array){var r=t[e[n]].length;for(var o=0;o<r;o++){t[e[n]][o]=this.replaceObject(e,t[e[n]][o])}}else if(typeof t[e[n]]==="object"){t[e[n]]=this.replaceObject(e,t[e[n]])}}}return t}};var _e=new function(){var e=true;this.setOn=function(t){e=t};this.getOn=function(){return e};this.error=function(t){try{e&&console.error(t)}catch(e){}};this.warn=function(t){try{e&&console.warn(t)}catch(e){}};this.info=function(t){try{e&&console.info(t)}catch(e){}};this.debug=function(t){try{e&&console.debug(t)}catch(e){}}};var ve=function(e){if(!e)e=new Date;return Math.round(e.getTime()/1e3)};var ye=function(e){return new Date(e*1e3)};var he=function(){if(ce){ce=ce+1}else{ce=Math.round(Math.random()*1e7)}return ce};var Te=function(){return Math.round(Math.random()*4294967296)};var Ce=function(e,t,n,r,o,i,a){wx.request({url:t,data:n,dataType:"json",method:e,header:{"Content-Type":"application/json"},success:function(e){z=Q=0;if(i)i(e.data)},fail:function(e){setTimeout(function(){var e="请求服务器失败,请检查你的网络是否正常";var t=Ee.getReturnError(e,-2);if(a)a(t)},16)}})};var Ae=function(e,t,n,r,o,i,a){Ce(e,t,JSON.stringify(n),r,o,function(e){var t=null;if(e)t=e;if(i)i(t)},a)};var Se=function(){return ae.sdkAppID&&ae.identifier};var Ge=function(e,t){if(!Se()){if(t){var n="请登录";var r=Ee.getReturnError(n,-4);if(e)e(r)}return false}return true};var Fe=function(){return r};var Oe=function(e,t,r,o){var a=i;if(Fe()){a=i.FORMAL.COMMON}else{a=i.TEST.COMMON}if(e==s.PIC){if(Fe()){a=i.FORMAL.PIC}else{a=i.TEST.PIC}}var u=a+"/"+l[e]+"/"+e+"/"+t+"?websdkappid="+n.APPID+"&v="+n.VERSION+"&platform="+n.PLAATFORM;if(Se()){if(t=="login"||t=="accesslayer"){u+="&identifier="+encodeURIComponent(ae.identifier)+"&usersig="+ae.userSig}else{if(ae.tinyid&&ae.a2){u+="&tinyid="+ae.tinyid+"&a2="+ae.a2}else{if(o){_e.error("tinyid或a2为空["+e+"]["+t+"]");o(Ee.getReturnError("tinyid或a2为空["+e+"]["+t+"]",-5));return false}}}u+="&contenttype="+ae.contentType}u+="&sdkappid="+ae.sdkAppID+"&accounttype="+ae.accountType+"&apn="+ae.apn+"&reqtime="+ve();return u};var Re=function(e,t){var n=null;if(re&&ne[0]){n="https://"+v.SOUND_SERVER_DOMAIN+"/asn.com/stddownload_common_file?authkey="+re+"&bid="+v.BUSSINESS_ID+"&subbid="+ae.sdkAppID+"&fileid="+e+"&filetype="+y.SOUND+"&openid="+t+"&ver=0"}else{_e.error("拼接语音下载url不报错：ip或者authkey为空")}return n};var Ne=function(e,t,n){var r=null;if(re&&ne[0]){r="http://"+ne[0]+"/asn.com/stddownload_common_file?authkey="+re+"&bid="+v.BUSSINESS_ID+"&subbid="+ae.sdkAppID+"&fileid="+e+"&filetype="+y.FILE+"&openid="+t+"&ver=0&filename="+encodeURIComponent(n)}else{_e.error("拼接文件下载url不报错：ip或者authkey为空")}me.downloadMap["uuid_"+e]=r;return r};var Pe=function(e,t,n,r,o,i,a){var u={From_Account:t,To_Account:o,os_platform:10,Timestamp:ve().toString(),Random:Te().toString(),request_info:[{busi_id:i,download_flag:r,type:a,uuid:e,version:T.SERVER_VERSION,auth_key:re,ip:ne[0]}]};Bt(u,function(e){if(e.error_code==0&&e.response_info){me.downloadMap["uuid_"+u.uuid]=e.response_info.url}},function(e){_e.error("获取下载地址失败",u.uuid)})};var be=function(){for(var e in le){var t=le[e];if(t){t.abort();le[se]=null}}se=0;le={}};var Ue=function(){be();ae={sdkAppID:null,appIDAt3rd:null,accountType:null,identifier:null,identifierNick:null,userSig:null,contentType:"json",apn:1};ue={};ce=0;ge=[];Jt.clear();zt.clear();W=null};var Le=function(e,t,n,i,a){Ue();if(n)ue=n;if(ue.isAccessFormalEnv==false){_e.error("请切换为正式环境！！！！");r=ue.isAccessFormalEnv}if(ue.isLogOn==false){_e.setOn(ue.isLogOn)}if(typeof ue.xssFilterEnable!=="undefined"){o=ue.xssFilterEnable}if(!e){if(a){a(Ee.getReturnError("loginInfo is empty",-6));return}}if(!e.sdkAppID){if(a){a(Ee.getReturnError("loginInfo.sdkAppID is empty",-7));return}}if(!e.accountType){if(a){a(Ee.getReturnError("loginInfo.accountType is empty",-8));return}}if(e.identifier){ae.identifier=e.identifier.toString()}if(e.identifier&&!e.userSig){if(a){a(Ee.getReturnError("loginInfo.userSig is empty",-9));return}}if(e.userSig){ae.userSig=e.userSig.toString()}ae.sdkAppID=e.sdkAppID;ae.accountType=e.accountType;if(ae.identifier&&ae.userSig){we(function(){Be(function(e,n){Jt.init(t,function(t){if(i){t.identifierNick=e;t.headurl=n;i(t)}},a)},a)})}else{Jt.init(t,i,a)}};var De=function(){a="wechat"};var ke=function(e,t,r){if(e=="longpolling"&&(t==Y||t==X)){return}var o=c[e];if(o){var i=ve();var a=null;var u={Code:t,ErrMsg:r};if(ae.a2){a=ae.a2.substring(0,10)+"_"+i+"_"+Te()}else if(ae.userSig){a=ae.userSig.substring(0,10)+"_"+i+"_"+Te()}if(a){var s={UniqKey:a,EventId:o,ReportTime:i,MsgCmdErrorCode:u};if(e=="login"){var l=[];l.push(s);var f={EvtItems:l,MainVersion:n.VERSION,Version:"0"};kt(f,function(e){l=null},function(e){l=null})}else{ge.push(s);if(ge.length>=de){var p={EvtItems:ge,MainVersion:n.VERSION,Version:"0"};kt(p,function(e){ge=[]},function(e){ge=[]})}}}}};var we=function(e){qt.apiCall(s.WEB_IM,"accesslayer",{},function(t){if(t.ErrorCode===0&&t.WebImAccessLayer===1){i.FORMAL.COMMON="https://events.tim.qq.com"}e()},function(){e()})};var Be=function(e,t){qt.apiCall(s.OPEN_IM,"login",{State:"Online"},function(n){if(n.TinyId){ae.tinyid=n.TinyId}else{if(t){t(Ee.getReturnError("TinyId is empty",-10));return}}if(n.A2Key){ae.a2=n.A2Key}else{if(t){t(Ee.getReturnError("A2Key is empty",-11));return}}var r=["Tag_Profile_IM_Nick","Tag_Profile_IM_Image"];var o={From_Account:ae.identifier,To_Account:[ae.identifier],LastStandardSequence:0,TagList:r};Ot(o,function(t){var n,r;if(t.UserProfileItem&&t.UserProfileItem.length>0){for(var o in t.UserProfileItem){for(var i in t.UserProfileItem[o].ProfileItem){switch(t.UserProfileItem[o].ProfileItem[i].Tag){case"Tag_Profile_IM_Nick":n=t.UserProfileItem[o].ProfileItem[i].Value;if(n)ae.identifierNick=n;break;case"Tag_Profile_IM_Image":r=t.UserProfileItem[o].ProfileItem[i].Value;if(r)ae.headurl=r;break}}}}if(e)e(ae.identifierNick,ae.headurl)},t)},t)};var qe=function(e,t,n){if(!Ge(n,false)){Ue();if(t)t({ActionStatus:g.OK,ErrorCode:0,ErrorInfo:"logout success"});return}if(e=="all"){qt.apiCall(s.OPEN_IM,"logout",{},function(e){Ue();if(t)t(e)},n)}else{qt.apiCall(s.OPEN_IM,"longpollinglogout",{LongPollingId:W},function(e){Ue();if(t)t(e)},n)}};var xe=function(e,t,n){if(!Ge(n,true))return;var r=null;switch(e.sess.type()){case f.C2C:r={From_Account:ae.identifier,To_Account:e.sess.id().toString(),MsgTimeStamp:e.time,MsgSeq:e.seq,MsgRandom:e.random,MsgBody:[],OfflinePushInfo:e.offlinePushInfo};break;case f.GROUP:var o=e.getSubType();r={GroupId:e.sess.id().toString(),From_Account:ae.identifier,Random:e.random,MsgBody:[]};switch(o){case G.COMMON:r.MsgPriority="COMMON";break;case G.REDPACKET:r.MsgPriority="REDPACKET";break;case G.LOVEMSG:r.MsgPriority="LOVEMSG";break;case G.TIP:_e.error("不能主动发送群提示消息,subType="+o);break;default:_e.error("发送群消息时，出现未知子消息类型：subType="+o);return}break;default:break}for(var i in e.elems){var a=e.elems[i];var u=null;var l=a.type;switch(l){case I.TEXT:u={Text:a.content.text};break;case I.FACE:u={Index:a.content.index,Data:a.content.data};break;case I.IMAGE:var c=[];for(var p in a.content.ImageInfoArray){c.push({Type:a.content.ImageInfoArray[p].type,Size:a.content.ImageInfoArray[p].size,Width:a.content.ImageInfoArray[p].width,Height:a.content.ImageInfoArray[p].height,URL:a.content.ImageInfoArray[p].url})}u={ImageFormat:a.content.ImageFormat,UUID:a.content.UUID,ImageInfoArray:c};break;case I.SOUND:_e.warn("web端暂不支持发送语音消息");break;case I.LOCATION:_e.warn("web端暂不支持发送地理位置消息");break;case I.FILE:u={UUID:a.content.uuid,FileName:a.content.name,FileSize:a.content.size,DownloadFlag:a.content.downFlag};break;case I.CUSTOM:u={Data:a.content.data,Desc:a.content.desc,Ext:a.content.ext};l=I.CUSTOM;break;default:_e.warn("web端暂不支持发送"+a.type+"消息");break}if(e.PushInfoBoolean){r.OfflinePushInfo=e.PushInfo}r.MsgBody.push({MsgType:l,MsgContent:u})}if(e.sess.type()==f.C2C){qt.apiCall(s.OPEN_IM,"sendmsg",r,t,n)}else if(e.sess.type()==f.GROUP){qt.apiCall(s.GROUP,"send_group_msg",r,t,n)}};var Ke=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.OPEN_IM,"longpolling",e,t,n,J,true)};var He=function(e,t,n,r){qt.apiCall(s.BIG_GROUP_LONG_POLLING,"get_msg",e,t,n,r)};var ze=function(e,t,n,r){if(!Ge(r,true))return;qt.apiCall(s.OPEN_IM,"getmsg",{Cookie:e,SyncFlag:t},function(e){if(e.MsgList&&e.MsgList.length){for(var t in e.MsgList){fe.push(e.MsgList[t])}}if(e.SyncFlag==1){ze(e.Cookie,e.SyncFlag,n,r)}else{e.MsgList=fe;fe=[];if(n)n(e)}},r)};var Je=function(e,t,n,r){if(!Ge(r,true))return;var o=[];for(var i in t){var a={To_Account:t[i].toAccount,LastedMsgTime:t[i].lastedMsgTime};o.push(a)}qt.apiCall(s.OPEN_IM,"msgreaded",{C2CMsgReaded:{Cookie:e,C2CMsgReadedItem:o}},n,r)};var Ve=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.OPEN_IM,"deletemsg",e,t,n)};var Ye=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.OPEN_IM,"getroammsg",e,function(r){var o=e.MaxCnt;var i=r.Complete;var a=r.MaxCnt;var u=r.MsgKey;var s=r.LastMsgTime;if(r.MsgList&&r.MsgList.length){for(var l in r.MsgList){pe.push(r.MsgList[l])}}var c=null;if(i==0){if(a<o){c={Peer_Account:e.Peer_Account,MaxCnt:o-a,LastMsgTime:s,MsgKey:u}}}if(c){Ye(c,t,n)}else{r.MsgList=pe;pe=[];if(t)t(r)}},n)};var Xe=function(e,t,n){if(!Ge(n,true))return;var r={Type:e.Type,Name:e.Name};var o=[];for(var i=0;i<e.MemberList.length;i++){o.push({Member_Account:e.MemberList[i]})}r.MemberList=o;if(e.GroupId){r.GroupId=e.GroupId}if(e.Owner_Account){r.Owner_Account=e.Owner_Account}if(e.Introduction){r.Introduction=e.Introduction}if(e.Notification){r.Notification=e.Notification}if(e.MaxMemberCount){r.MaxMemberCount=e.MaxMemberCount}if(e.ApplyJoinOption){r.ApplyJoinOption=e.ApplyJoinOption}if(e.AppDefinedData){r.AppDefinedData=e.AppDefinedData}if(e.FaceUrl){r.FaceUrl=e.FaceUrl}qt.apiCall(s.GROUP,"create_group",r,t,n)};var je=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.GROUP,"create_group",e,t,n)};var We=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.GROUP,"modify_group_base_info",e,t,n)};var Qe=function(e,t,n){if(!Ge(n,true))return;e.GroupId=String(e.GroupId);qt.apiCall(s.GROUP,"apply_join_group",{GroupId:e.GroupId,ApplyMsg:e.ApplyMsg,UserDefinedField:e.UserDefinedField},t,n)};var $e=function(e,t,n){e.GroupId=String(e.GroupId);var r;if(!Ge(n,false)){r=s.BIG_GROUP}else{r=s.GROUP}if(Jt.checkBigGroupLongPollingOn(e.GroupId)){n&&n(Ee.getReturnError("Join Group failed; You have already been in this group, you have to quit group before you rejoin",10013));return}qt.apiCall(r,"apply_join_group",{GroupId:e.GroupId,ApplyMsg:e.ApplyMsg,UserDefinedField:e.UserDefinedField},function(r){if(r.JoinedStatus&&r.JoinedStatus=="JoinedSuccess"){if(r.LongPollingKey){Jt.setBigGroupLongPollingOn(true);Jt.setBigGroupLongPollingKey(e.GroupId,r.LongPollingKey);Jt.setBigGroupLongPollingMsgMap(e.GroupId,0);Jt.bigGroupLongPolling(e.GroupId)}else{n&&n(Ee.getReturnError("Join Group succeed; But the type of group is not AVChatRoom: groupid="+e.GroupId,-12));return}}if(t)t(r)},function(e){if(n)n(e)})};var Ze=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.GROUP,"handle_apply_join_group",{GroupId:e.GroupId,Applicant_Account:e.Applicant_Account,HandleMsg:e.HandleMsg,Authentication:e.Authentication,MsgKey:e.MsgKey,ApprovalMsg:e.ApprovalMsg,UserDefinedField:e.UserDefinedField},t,function(e){if(e.ErrorCode==10024){if(t){var r={ActionStatus:g.OK,ErrorCode:0,ErrorInfo:"该申请已经被处理过"};t(r)}}else{if(n)n(e)}})};var et=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.GROUP,"get_pendency",{StartTime:e.StartTime,Limit:e.Limit,Handle_Account:ae.identifier},t,function(e){})};var tt=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.GROUP,"report_pendency",{ReportTime:e.ReportTime,From_Account:ae.identifier},t,function(e){})};var nt=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.GROUP,"handle_invite_join_group",{GroupId:e.GroupId,Inviter_Account:e.Inviter_Account,HandleMsg:e.HandleMsg,Authentication:e.Authentication,MsgKey:e.MsgKey,ApprovalMsg:e.ApprovalMsg,UserDefinedField:e.UserDefinedField},t,function(e){})};var rt=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.GROUP,"quit_group",{GroupId:e.GroupId},t,n)};var ot=function(e,t,n){var r;if(!Ge(n,false)){r=s.BIG_GROUP}else{r=s.GROUP}Jt.resetBigGroupLongPollingInfo(e.GroupId);qt.apiCall(r,"quit_group",{GroupId:e.GroupId},function(n){zt.delSessByTypeId(f.GROUP,e.GroupId);if(t)t(n)},n)};var it=function(e,t,n){qt.apiCall(s.GROUP,"search_group",e,t,n)};var at=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.GROUP,"get_group_public_info",{GroupIdList:e.GroupIdList,ResponseFilter:{GroupBasePublicInfoFilter:e.GroupBasePublicInfoFilter}},function(e){e.ErrorInfo="";if(e.GroupInfo){for(var r in e.GroupInfo){var o=e.GroupInfo[r].ErrorCode;if(o>0){e.ActionStatus=g.FAIL;e.GroupInfo[r].ErrorInfo="["+o+"]"+e.GroupInfo[r].ErrorInfo;e.ErrorInfo+=e.GroupInfo[r].ErrorInfo+"\n"}}}if(e.ActionStatus==g.FAIL){if(n){n(e)}}else if(t){t(e)}},n)};var ut=function(e,t,n){if(!Ge(n,true))return;var r={GroupIdList:e.GroupIdList,ResponseFilter:{GroupBaseInfoFilter:e.GroupBaseInfoFilter,MemberInfoFilter:e.MemberInfoFilter}};if(e.AppDefinedDataFilter_Group){r.ResponseFilter.AppDefinedDataFilter_Group=e.AppDefinedDataFilter_Group}if(e.AppDefinedDataFilter_GroupMember){r.ResponseFilter.AppDefinedDataFilter_GroupMember=e.AppDefinedDataFilter_GroupMember}qt.apiCall(s.GROUP,"get_group_info",r,t,n)};var st=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.GROUP,"get_group_member_info",{GroupId:e.GroupId,Offset:e.Offset,Limit:e.Limit,MemberInfoFilter:e.MemberInfoFilter,MemberRoleFilter:e.MemberRoleFilter,AppDefinedDataFilter_GroupMember:e.AppDefinedDataFilter_GroupMember},t,n)};var lt=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.GROUP,"add_group_member",{GroupId:e.GroupId,Silence:e.Silence,MemberList:e.MemberList},t,n)};var ct=function(e,t,n){if(!Ge(n,true))return;var r={};if(e.GroupId){r.GroupId=e.GroupId}if(e.Member_Account){r.Member_Account=e.Member_Account}if(e.Role){r.Role=e.Role}if(e.MsgFlag){r.MsgFlag=e.MsgFlag}if(e.ShutUpTime){r.ShutUpTime=e.ShutUpTime}if(e.NameCard){r.NameCard=e.NameCard}if(e.AppMemberDefinedData){r.AppMemberDefinedData=e.AppMemberDefinedData}qt.apiCall(s.GROUP,"modify_group_member_info",r,t,n)};var ft=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.GROUP,"delete_group_member",{GroupId:e.GroupId,Silence:e.Silence,MemberToDel_Account:e.MemberToDel_Account,Reason:e.Reason},t,n)};var pt=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.GROUP,"destroy_group",{GroupId:e.GroupId},t,n)};var dt=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.GROUP,"change_group_owner",e,t,n)};var gt=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.GROUP,"get_joined_group_list",{Member_Account:e.Member_Account,Limit:e.Limit,Offset:e.Offset,GroupType:e.GroupType,ResponseFilter:{GroupBaseInfoFilter:e.GroupBaseInfoFilter,SelfInfoFilter:e.SelfInfoFilter}},t,n)};var mt=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.GROUP,"get_role_in_group",{GroupId:e.GroupId,User_Account:e.User_Account},t,n)};var It=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.GROUP,"forbid_send_msg",{GroupId:e.GroupId,Members_Account:e.Members_Account,ShutUpTime:e.ShutUpTime},t,n)};var Mt=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.GROUP,"send_group_system_notification",e,t,n)};var Et=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.GROUP,"group_msg_get",{GroupId:e.GroupId,ReqMsgSeq:e.ReqMsgSeq,ReqMsgNumber:e.ReqMsgNumber},t,n)};var _t=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.GROUP,"msg_read_report",{GroupId:e.GroupId,MsgReadedSeq:e.MsgReadedSeq},t,n)};var vt=function(e){var t=[];if(e.Fail_Account&&e.Fail_Account.length){t=e.Fail_Account}if(e.Invalid_Account&&e.Invalid_Account.length){for(var n in e.Invalid_Account){t.push(e.Invalid_Account[n])}}if(t.length){e.ActionStatus=g.FAIL;e.ErrorCode=m;e.ErrorInfo="";for(var r in t){var o=t[r];for(var i in e.ResultItem){if(e.ResultItem[i].To_Account==o){var a=e.ResultItem[i].ResultCode;e.ResultItem[i].ResultInfo="["+a+"]"+e.ResultItem[i].ResultInfo;e.ErrorInfo+=e.ResultItem[i].ResultInfo+"\n";break}}}}return e};var yt=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.FRIEND,"friend_add",{From_Account:ae.identifier,AddFriendItem:e.AddFriendItem},function(e){var r=vt(e);if(r.ActionStatus==g.FAIL){if(n)n(r)}else if(t){t(r)}},n)};var ht=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.FRIEND,"friend_delete",{From_Account:ae.identifier,To_Account:e.To_Account,DeleteType:e.DeleteType},function(e){var r=vt(e);if(r.ActionStatus==g.FAIL){if(n)n(r)}else if(t){t(r)}},n)};var Tt=function(e,t,n){if(!Ge(n,true))return;if(e.chatType==1){qt.apiCall(s.DEL_CHAT,"delete",{From_Account:ae.identifier,Type:e.chatType,To_Account:e.To_Account},t,n)}else{qt.apiCall(s.DEL_CHAT,"delete",{From_Account:ae.identifier,Type:e.chatType,ToGroupid:e.To_Account},t,n)}};var Ct=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.FRIEND,"pendency_get",{From_Account:ae.identifier,PendencyType:e.PendencyType,StartTime:e.StartTime,MaxLimited:e.MaxLimited,LastSequence:e.LastSequence},t,n)};var At=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.FRIEND,"PendencyReport",{From_Account:ae.identifier,LatestPendencyTimeStamp:e.LatestPendencyTimeStamp},t,n)};var St=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.FRIEND,"pendency_delete",{From_Account:ae.identifier,PendencyType:e.PendencyType,To_Account:e.To_Account},function(e){var r=vt(e);if(r.ActionStatus==g.FAIL){if(n)n(r)}else if(t){t(r)}},n)};var Gt=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.FRIEND,"friend_response",{From_Account:ae.identifier,ResponseFriendItem:e.ResponseFriendItem},function(e){var r=vt(e);if(r.ActionStatus==g.FAIL){if(n)n(r)}else if(t){t(r)}},n)};var Ft=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.FRIEND,"friend_get_all",{From_Account:ae.identifier,TimeStamp:e.TimeStamp,StartIndex:e.StartIndex,GetCount:e.GetCount,LastStandardSequence:e.LastStandardSequence,TagList:e.TagList},t,n)};var Ot=function(e,t,n){if(e.To_Account.length>100){e.To_Account.length=100;_e.error("获取用户资料人数不能超过100人")}if(!Ge(n,true))return;qt.apiCall(s.PROFILE,"portrait_get",{From_Account:ae.identifier,To_Account:e.To_Account,TagList:e.TagList},function(e){var r=[];if(e.Fail_Account&&e.Fail_Account.length){r=e.Fail_Account}if(e.Invalid_Account&&e.Invalid_Account.length){for(var o in e.Invalid_Account){r.push(e.Invalid_Account[o])}}if(r.length){e.ActionStatus=g.FAIL;e.ErrorCode=m;e.ErrorInfo="";for(var i in r){var a=r[i];for(var u in e.UserProfileItem){if(e.UserProfileItem[u].To_Account==a){var s=e.UserProfileItem[u].ResultCode;e.UserProfileItem[u].ResultInfo="["+s+"]"+e.UserProfileItem[u].ResultInfo;e.ErrorInfo+="账号:"+a+","+e.UserProfileItem[u].ResultInfo+"\n";break}}}}if(e.ActionStatus==g.FAIL){if(n)n(e)}else if(t){t(e)}},n)};var Rt=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.PROFILE,"portrait_set",{From_Account:ae.identifier,ProfileItem:e.ProfileItem},function(n){for(var r in e.ProfileItem){var o=e.ProfileItem[r];if(o.Tag=="Tag_Profile_IM_Nick"){ae.identifierNick=o.Value;break}}if(t)t(n)},n)};var Nt=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.FRIEND,"black_list_add",{From_Account:ae.identifier,To_Account:e.To_Account},function(e){var r=vt(e);if(r.ActionStatus==g.FAIL){if(n)n(r)}else if(t){t(r)}},n)};var Pt=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.FRIEND,"black_list_delete",{From_Account:ae.identifier,To_Account:e.To_Account},function(e){var r=vt(e);if(r.ActionStatus==g.FAIL){if(n)n(r)}else if(t){t(r)}},n)};var bt=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.FRIEND,"black_list_get",{From_Account:ae.identifier,StartIndex:e.StartIndex,MaxLimited:e.MaxLimited,LastSequence:e.LastSequence},t,n)};var Ut=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.RECENT_CONTACT,"get",{From_Account:ae.identifier,Count:e.Count},t,n)};var Lt=function(e,t,n){if(!Ge(n,true))return;var r;if(Fe()){r="pic_up"}else{r="pic_up_test"}qt.apiCall(s.PIC,r,{App_Version:T.APP_VERSION,From_Account:ae.identifier,To_Account:e.To_Account,Seq:e.Seq,Timestamp:e.Timestamp,Random:e.Random,File_Str_Md5:e.File_Str_Md5,File_Size:e.File_Size,File_Type:e.File_Type,Server_Ver:T.SERVER_VERSION,Auth_Key:re,Busi_Id:e.Busi_Id,PkgFlag:e.PkgFlag,Slice_Offset:e.Slice_Offset,Slice_Size:e.Slice_Size,Slice_Data:e.Slice_Data},t,n)};var Dt=function(e,t){if(!Ge(t,true))return;qt.apiCall(s.OPEN_IM,"authkey",{},e,t)};var kt=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.IM_OPEN_STAT,"web_report",e,t,n)};var wt=function(e,t,n){if(!Ge(n,true))return;qt.apiCall(s.OPEN_IM,"getlongpollingid",{},function(e){t&&t(e)},n)};var Bt=function(e,t,n){qt.apiCall(s.PIC,"apply_download",e,t,n)};De();var qt=new function(){var e=null;this.init=function(t,n,r){if(t)e=t};this.callBack=function(t){if(e)e(t)};this.clear=function(){e=null};this.apiCall=function(e,t,n,r,o,i,a){var u=Oe(e,t,r,o);if(u==false)return;Ae("POST",u,n,i,a,function(i){var a=null,s="";if(t=="pic_up"){n.Slice_Data=""}var l="\n request url: \n"+u+"\n request body: \n"+JSON.stringify(n)+"\n response: \n"+JSON.stringify(i);if(i.ActionStatus==g.OK){_e.info("["+e+"]["+t+"]success: "+l);if(r)r(i);a=0;s=""}else{a=i.ErrorCode;s=i.ErrorInfo;if(o){i.SrcErrorInfo=i.ErrorInfo;i.ErrorInfo="["+e+"]["+t+"]failed: "+l;if(t!="longpolling"||i.ErrorCode!=Y){_e.error(i.ErrorInfo)}o(i)}}ke(t,a,s)},function(e){o&&o(e);ke(t,e.ErrorCode,e.ErrorInfo)})}};var xt=function(e,t,n,r,o,i){this._impl={skey:xt.skey(e,t),type:e,id:t,name:n,icon:r,unread:0,isAutoRead:false,time:o>=0?o:0,curMaxMsgSeq:i>=0?i:0,msgs:[],isFinished:1}};xt.skey=function(e,t){return e+t};xt.prototype.type=function(){return this._impl.type};xt.prototype.id=function(){return this._impl.id};xt.prototype.name=function(){return this._impl.name};xt.prototype.icon=function(){return this._impl.icon};xt.prototype.unread=function(e){if(typeof e!=="undefined"){this._impl.unread=e}else{return this._impl.unread}};xt.prototype.isFinished=function(e){if(typeof e!=="undefined"){this._impl.isFinished=e}else{return this._impl.isFinished}};xt.prototype.time=function(){return this._impl.time};xt.prototype.curMaxMsgSeq=function(e){if(typeof e!=="undefined"){this._impl.curMaxMsgSeq=e}else{return this._impl.curMaxMsgSeq}};xt.prototype.msgCount=function(){return this._impl.msgs.length};xt.prototype.msg=function(e){return this._impl.msgs[e]};xt.prototype.msgs=function(){return this._impl.msgs};xt.prototype._impl_addMsg=function(e,t){this._impl.msgs.push(e);if(e.time>this._impl.time)this._impl.time=e.time;if(e.seq>this._impl.curMaxMsgSeq)this._impl.curMaxMsgSeq=e.seq;if(!e.isSend&&!this._impl.isAutoRead&&t){this._impl.unread++}};var Kt=function(e,t){this.toAccount=e;this.lastedMsgTime=t};var Ht=function(e,t,n,r,o,i,a,u,s){this.sess=e;this.subType=a>=0?a:0;this.fromAccount=i;this.fromAccountNick=u?u:i;this.fromAccountHeadurl=s||null;this.isSend=Boolean(t);this.seq=n>=0?n:he();this.random=r>=0?r:Te();this.time=o>=0?o:ve();this.elems=[];var l=e.type();switch(l){case f.GROUP:break;case f.C2C:default:break}};Ht.prototype.getSession=function(){return this.sess};Ht.prototype.getType=function(){return this.subType};Ht.prototype.getSubType=function(){return this.subType};Ht.prototype.getFromAccount=function(){return this.fromAccount};Ht.prototype.getFromAccountNick=function(){return this.fromAccountNick};Ht.prototype.getIsSend=function(){return this.isSend};Ht.prototype.getSeq=function(){return this.seq};Ht.prototype.getTime=function(){return this.time};Ht.prototype.getRandom=function(){return this.random};Ht.prototype.getElems=function(){return this.elems};Ht.prototype.getMsgUniqueId=function(){return this.uniqueId};Ht.prototype.addText=function(e){this.addElem(new t.Msg.Elem(I.TEXT,e))};Ht.prototype.addFace=function(e){this.addElem(new t.Msg.Elem(I.FACE,e))};Ht.prototype.addImage=function(e){this.addElem(new t.Msg.Elem(I.IMAGE,e))};Ht.prototype.addLocation=function(e){this.addElem(new t.Msg.Elem(I.LOCATION,e))};Ht.prototype.addFile=function(e){this.addElem(new t.Msg.Elem(I.FILE,e))};Ht.prototype.addCustom=function(e){this.addElem(new t.Msg.Elem(I.CUSTOM,e))};Ht.prototype.addElem=function(e){this.elems.push(e)};Ht.prototype.toHtml=function(){var e="";for(var t in this.elems){var n=this.elems[t];e+=n.toHtml()}return e};Ht.Elem=function(e,t){this.type=e;this.content=t};Ht.Elem.prototype.getType=function(){return this.type};Ht.Elem.prototype.getContent=function(){return this.content};Ht.Elem.prototype.toHtml=function(){var e;e=this.content.toHtml();return e};Ht.Elem.Text=function(e){this.text=Ee.xssFilter(e)};Ht.Elem.Text.prototype.getText=function(){return this.text};Ht.Elem.Text.prototype.toHtml=function(){return this.text};Ht.Elem.Face=function(e,t){this.index=e;this.data=t};Ht.Elem.Face.prototype.getIndex=function(){return this.index};Ht.Elem.Face.prototype.getData=function(){return this.data};Ht.Elem.Face.prototype.toHtml=function(){var e=null;var t=Ie[this.data];var n=Me[t];if(n&&n[1]){e=n[1]}if(e){return"<img src='"+e+"'/>"}else{return this.data}};Ht.Elem.Location=function(e,t,n){this.latitude=t;this.longitude=e;this.desc=n};Ht.Elem.Location.prototype.getLatitude=function(){return this.latitude};Ht.Elem.Location.prototype.getLongitude=function(){return this.longitude};Ht.Elem.Location.prototype.getDesc=function(){return this.desc};Ht.Elem.Location.prototype.toHtml=function(){return"经度="+this.longitude+",纬度="+this.latitude+",描述="+this.desc};Ht.Elem.Images=function(e,t){this.UUID=e;if(typeof t!=="number"){t=parseInt(E[t]||E["UNKNOWN"],10)}this.ImageFormat=t;this.ImageInfoArray=[]};Ht.Elem.Images.prototype.addImage=function(e){this.ImageInfoArray.push(e)};Ht.Elem.Images.prototype.toHtml=function(){var e=this.getImage(M.SMALL);var t=this.getImage(M.LARGE);var n=this.getImage(M.ORIGIN);if(!t){t=e}if(!n){n=e}return"<img src='"+e.getUrl()+"#"+t.getUrl()+"#"+n.getUrl()+"' style='CURSOR: hand' id='"+this.getImageId()+"' bigImgUrl='"+t.getUrl()+"' onclick='imageClick(this)' />"};Ht.Elem.Images.prototype.getImageId=function(){return this.UUID};Ht.Elem.Images.prototype.getImageFormat=function(){return this.ImageFormat};Ht.Elem.Images.prototype.getImage=function(e){for(var t in this.ImageInfoArray){if(this.ImageInfoArray[t].getType()==e){return this.ImageInfoArray[t]}}var n=null;this.ImageInfoArray.forEach(function(t){if(t.getType()==e){n=t}});return n};Ht.Elem.Images.Image=function(e,t,n,r,o){this.type=e;this.size=t;this.width=n;this.height=r;this.url=o};Ht.Elem.Images.Image.prototype.getType=function(){return this.type};Ht.Elem.Images.Image.prototype.getSize=function(){return this.size};Ht.Elem.Images.Image.prototype.getWidth=function(){return this.width};Ht.Elem.Images.Image.prototype.getHeight=function(){return this.height};Ht.Elem.Images.Image.prototype.getUrl=function(){return this.url};Ht.Elem.Sound=function(e,t,n,r,o,i,a){this.uuid=e;this.second=t;this.size=n;this.senderId=r;this.receiverId=o;this.downFlag=i;this.busiId=a==f.C2C?2:1;if(this.downFlag!==undefined&&this.busiId!==undefined){Pe(e,r,t,i,o,this.busiId,h.SOUND)}else{this.downUrl=Re(e,r,t)}};Ht.Elem.Sound.prototype.getUUID=function(){return this.uuid};Ht.Elem.Sound.prototype.getSecond=function(){return this.second};Ht.Elem.Sound.prototype.getSize=function(){return this.size};Ht.Elem.Sound.prototype.getSenderId=function(){return this.senderId};Ht.Elem.Sound.prototype.getDownUrl=function(){return this.downUrl};Ht.Elem.Sound.prototype.toHtml=function(){if(a.type=="ie"&&parseInt(a.ver)<=8){return"[这是一条语音消息]demo暂不支持ie8(含)以下浏览器播放语音,语音URL:"+this.downUrl}return'<audio id="uuid_'+this.uuid+'" src="'+this.downUrl+'" controls="controls" onplay="onChangePlayAudio(this)" preload="none"></audio>'};Ht.Elem.File=function(e,t,n,r,o,i,a){this.uuid=e;this.name=t;this.size=n;this.senderId=r;this.receiverId=o;this.downFlag=i;this.busiId=a==f.C2C?2:1;if(i!==undefined&&this.busiId!==undefined){Pe(e,r,t,i,o,this.busiId,h.FILE)}else{this.downUrl=Ne(e,r,t)}};Ht.Elem.File.prototype.getUUID=function(){return this.uuid};Ht.Elem.File.prototype.getName=function(){return this.name};Ht.Elem.File.prototype.getSize=function(){return this.size};Ht.Elem.File.prototype.getSenderId=function(){return this.senderId};Ht.Elem.File.prototype.getDownUrl=function(){return this.downUrl};Ht.Elem.File.prototype.getDownFlag=function(){return this.downFlag};Ht.Elem.File.prototype.toHtml=function(){var e,t;e=this.size;t="Byte";if(this.size>=1024){e=Math.round(this.size/1024);t="KB"}return{uuid:this.uuid,name:this.name,size:e,unitStr:t}};Ht.Elem.GroupTip=function(e,t,n,r,o,i){this.opType=e;this.opUserId=t;this.groupId=n;this.groupName=r;this.userIdList=o?o:[];this.groupInfoList=[];this.memberInfoList=[];this.groupMemberNum=null;this.userinfo=i?i:[]};Ht.Elem.GroupTip.prototype.addGroupInfo=function(e){this.groupInfoList.push(e)};Ht.Elem.GroupTip.prototype.addMemberInfo=function(e){this.memberInfoList.push(e)};Ht.Elem.GroupTip.prototype.getOpType=function(){return this.opType};Ht.Elem.GroupTip.prototype.getOpUserId=function(){return this.opUserId};Ht.Elem.GroupTip.prototype.getGroupId=function(){return this.groupId};Ht.Elem.GroupTip.prototype.getGroupName=function(){return this.groupName};Ht.Elem.GroupTip.prototype.getUserIdList=function(){return this.userIdList};Ht.Elem.GroupTip.prototype.getUserInfo=function(){return this.userinfo};Ht.Elem.GroupTip.prototype.getGroupInfoList=function(){return this.groupInfoList};Ht.Elem.GroupTip.prototype.getMemberInfoList=function(){return this.memberInfoList};Ht.Elem.GroupTip.prototype.getGroupMemberNum=function(){return this.groupMemberNum};Ht.Elem.GroupTip.prototype.setGroupMemberNum=function(e){return this.groupMemberNum=e};Ht.Elem.GroupTip.prototype.toHtml=function(){var e="[群提示消息]";var t=x-1;var n=null;switch(this.opType){case O.JOIN:e+=this.opUserId+"邀请了";n=null;for(n in this.userIdList){e+=this.userIdList[n]+",";if(this.userIdList.length>x&&n==t){e+="等"+this.userIdList.length+"人";break}}e+="加入该群";break;case O.QUIT:e+=this.opUserId+"主动退出该群";break;case O.KICK:e+=this.opUserId+"将";n=null;for(n in this.userIdList){e+=this.userIdList[n]+",";if(this.userIdList.length>x&&n==t){e+="等"+this.userIdList.length+"人";break}}e+="踢出该群";break;case O.SET_ADMIN:e+=this.opUserId+"将";n=null;for(n in this.userIdList){e+=this.userIdList[n]+",";if(this.userIdList.length>x&&n==t){e+="等"+this.userIdList.length+"人";break}}e+="设为管理员";break;case O.CANCEL_ADMIN:e+=this.opUserId+"取消";n=null;for(n in this.userIdList){e+=this.userIdList[n]+",";if(this.userIdList.length>x&&n==t){e+="等"+this.userIdList.length+"人";break}}e+="的管理员资格";break;case O.MODIFY_GROUP_INFO:e+=this.opUserId+"修改了群资料：";n=null;for(n in this.groupInfoList){var r=this.groupInfoList[n].getType();var o=this.groupInfoList[n].getValue();switch(r){case R.FACE_URL:e+="群头像为"+o+"; ";break;case R.NAME:e+="群名称为"+o+"; ";break;case R.OWNER:e+="群主为"+o+"; ";break;case R.NOTIFICATION:e+="群公告为"+o+"; ";break;case R.INTRODUCTION:e+="群简介为"+o+"; ";break;default:e+="未知信息为:type="+r+",value="+o+"; ";break}}break;case O.MODIFY_MEMBER_INFO:e+=this.opUserId+"修改了群成员资料:";n=null;for(n in this.memberInfoList){var i=this.memberInfoList[n].getUserId();var a=this.memberInfoList[n].getShutupTime();e+=i+": ";if(a!=null&&a!==undefined){if(a==0){e+="取消禁言; "}else{e+="禁言"+a+"秒; "}}else{e+=" shutupTime为空"}if(this.memberInfoList.length>x&&n==t){e+="等"+this.memberInfoList.length+"人";break}}break;case O.READED:_e.info("消息已读同步");break;default:e+="未知群提示消息类型：type="+this.opType;break}return e};Ht.Elem.GroupTip.GroupInfo=function(e,t){this.type=e;this.value=t};Ht.Elem.GroupTip.GroupInfo.prototype.getType=function(){return this.type};Ht.Elem.GroupTip.GroupInfo.prototype.getValue=function(){return this.value};Ht.Elem.GroupTip.MemberInfo=function(e,t){this.userId=e;this.shutupTime=t};Ht.Elem.GroupTip.MemberInfo.prototype.getUserId=function(){return this.userId};Ht.Elem.GroupTip.MemberInfo.prototype.getShutupTime=function(){return this.shutupTime};Ht.Elem.Custom=function(e,t,n){this.data=e;this.desc=t;this.ext=n};Ht.Elem.Custom.prototype.getData=function(){return this.data};Ht.Elem.Custom.prototype.getDesc=function(){return this.desc};Ht.Elem.Custom.prototype.getExt=function(){return this.ext};Ht.Elem.Custom.prototype.toHtml=function(){return this.data};var zt=new function(){var t={};var n=[];e={};this.cookie="";this.syncFlag=0;var r=function(e){for(var n in t){e(t[n])}};var o=function(t){var n=false;var r=t.sess._impl.skey;var o=t.isSend+t.seq+t.random;var i=e[r]&&e[r][o];if(i){n=true}if(e[r]){e[r][o]={time:t.time}}else{e[r]={};e[r][o]={time:t.time}}return n};this.sessMap=function(){return t};this.sessCount=function(){return n.length};this.sessByTypeId=function(e,n){var r=xt.skey(e,n);if(r===undefined||r==null)return null;return t[r]};this.delSessByTypeId=function(n,r){var o=xt.skey(n,r);if(o===undefined||o==null)return false;if(t[o]){delete t[o];delete e[o]}return true};this.resetCookieAndSyncFlag=function(){this.cookie="";this.syncFlag=0};this.setAutoRead=function(e,t,n){if(n)r(function(e){e._impl.isAutoRead=false});if(e){e._impl.isAutoRead=t;if(t){e._impl.unread=0;if(e._impl.type==f.C2C){var o=[];o.push(new Kt(e._impl.id,e._impl.time));Je(zt.cookie,o,function(e){_e.info("[setAutoRead]: c2CMsgReaded success")},function(e){_e.error("[setAutoRead}: c2CMsgReaded failed:"+e.ErrorInfo)})}else if(e._impl.type==f.GROUP){var i={GroupId:e._impl.id,MsgReadedSeq:e._impl.curMaxMsgSeq};_t(i,function(e){_e.info("groupMsgReaded success")},function(e){_e.error("groupMsgReaded failed:"+e.ErrorInfo)})}}}};this.c2CMsgReaded=function(e,t,n){var r=[];r.push(new Kt(e.To_Account,e.LastedMsgTime));Je(zt.cookie,r,function(e){if(t){_e.info("c2CMsgReaded success");t(e)}},function(e){if(n){_e.error("c2CMsgReaded failed:"+e.ErrorInfo);n(e)}})};this.addSession=function(e){t[e._impl.skey]=e};this.delSession=function(e){delete t[e._impl.skey]};this.clear=function(){t={};n=[];e={};this.cookie="";this.syncFlag=0};this.addMsg=function(e,n){if(o(e))return false;var r=e.sess;if(!t[r._impl.skey])this.addSession(r);r._impl_addMsg(e,n);return true};this.updateTimeline=function(){var e=new Array;r(function(t){e.push(t)});e.sort(function(e,t){return t.time-e.time});n=e}};var Jt=new function(){var e=null;var t=null;var n={1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null,9:null,10:null,11:null,15:null,255:null,12:null};var r={1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null};var o={1:null};var i=null;var a=null;var u=null;var s=false;var l=false;var c=0;var p=0;var d=null;var m=false;var M={};var E=90;var _=null;var v={};var y={92:null,96:null};var h=null;var T=0;var U={};var D={};this.setLongPollingOn=function(e){s=e};this.getLongPollingOn=function(){return s};this.resetLongPollingInfo=function(){s=false;c=0;p=0};this.setBigGroupLongPollingOn=function(e){m=e};this.checkBigGroupLongPollingOn=function(e){return!!_[e]};this.setBigGroupLongPollingKey=function(e,t){_[e]=t};this.resetBigGroupLongPollingInfo=function(e){m=false;M[e]=0;_[e]=null;v[e]={}};this.setBigGroupLongPollingMsgMap=function(e,t){var n=v[e];if(n){n=parseInt(n)+t;v[e]=n}else{v[e]=t}};this.clear=function(){t=null;n={1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null,9:null,10:null,11:null,15:null,255:null,12:null};r={1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null};o={1:null};e=null;s=false;c=0;p=0;d=null;m=false;M={};_={};v={};D={};ne=[];re=null;oe=null};var w=function(e,t){Dt(function(t){ne=t.IpList;re=t.AuthKey;oe=t.ExpireTime;if(e)e(t)},function(e){_e.error("initIpAndAuthkey failed:"+e.ErrorInfo);if(t)t(e)})};var B=function(e,t){var n={Member_Account:ae.identifier,Limit:1e3,Offset:0,GroupBaseInfoFilter:["NextMsgSeq"]};gt(n,function(t){if(!t.GroupIdList||t.GroupIdList.length==0){_e.info("initMyGroupMaxSeqs: 目前还没有加入任何群组");if(e)e(t);return}for(var n=0;n<t.GroupIdList.length;n++){var r=t.GroupIdList[n].GroupId;var o=t.GroupIdList[n].NextMsgSeq-1;U[r]=o}if(e)e(t)},function(e){_e.error("initMyGroupMaxSeqs failed:"+e.ErrorInfo);if(t)t(e)})};var q=function(e,t,n){T++;var r={GroupId:e,ReqMsgSeq:t,ReqMsgNumber:n};_e.warn("第"+T+"次补齐群消息,参数="+JSON.stringify(r));Jt.syncGroupMsgs(r)};var x=function(e,t){var n=U[e];if(n){if(t>n){U[e]=t}}else{U[e]=t}};var Z=function(e,t){for(var n in e){var r=e[n];if(r.From_Account){var o=Ie(r,false,true);if(o){t.push(o)}x(r.ToGroupId,r.MsgSeq)}}return t};var ee=function(t,n){var r=[];var o=[];o=n;for(var i in o){var a=o[i];var u,s;var l=a.From_AccountHeadurl||"";if(a.From_Account==ae.identifier){u=true;s=a.To_Account}else{u=false;s=a.From_Account}var c=zt.sessByTypeId(f.C2C,s);if(!c){c=new xt(f.C2C,s,s,l,0,0)}var p=new Ht(c,u,a.MsgSeq,a.MsgRandom,a.MsgTimeStamp,a.From_Account,A.COMMON,a.From_AccountNick,l);var d=null;var g=null;var m=null;for(var M in a.MsgBody){d=a.MsgBody[M];m=d.MsgType;switch(m){case I.TEXT:g=new Ht.Elem.Text(d.MsgContent.Text);break;case I.FACE:g=new Ht.Elem.Face(d.MsgContent.Index,d.MsgContent.Data);break;case I.IMAGE:g=new Ht.Elem.Images(d.MsgContent.UUID,d.MsgContent.ImageFormat||"");for(var E in d.MsgContent.ImageInfoArray){var _=d.MsgContent.ImageInfoArray[E];g.addImage(new Ht.Elem.Images.Image(_.Type,_.Size,_.Width,_.Height,_.URL))}break;case I.SOUND:if(d.MsgContent){g=new Ht.Elem.Sound(d.MsgContent.UUID,d.MsgContent.Second,d.MsgContent.Size,a.From_Account,a.To_Account,d.MsgContent.Download_Flag,f.C2C)}else{m=I.TEXT;g=new Ht.Elem.Text("[语音消息]下载地址解析出错")}break;case I.LOCATION:g=new Ht.Elem.Location(d.MsgContent.Longitude,d.MsgContent.Latitude,d.MsgContent.Desc);break;case I.FILE:case I.FILE+" ":m=I.FILE;if(d.MsgContent){g=new Ht.Elem.File(d.MsgContent.UUID,d.MsgContent.FileName,d.MsgContent.FileSize,a.From_Account,a.To_Account,d.MsgContent.Download_Flag,f.C2C)}else{m=I.TEXT;g=new Ht.Elem.Text("[文件消息下载地址解析出错]")}break;case I.CUSTOM:try{var v=JSON.parse(d.MsgContent.Data);if(v&&v.userAction&&v.userAction==k.ING){continue}}catch(e){}m=I.CUSTOM;g=new Ht.Elem.Custom(d.MsgContent.Data,d.MsgContent.Desc,d.MsgContent.Ext);break;default:m=I.TEXT;g=new Ht.Elem.Text("web端暂不支持"+d.MsgType+"消息");break}p.elems.push(new Ht.Elem(m,g))}if(p.elems.length>0&&zt.addMsg(p,true)){r.push(p)}}if(r.length>0)zt.updateTimeline();if(r.length>0){if(e)e(r)}};var te=function(t,n){var r={};var o=[];var i=99999999;var a=-1;for(var u in n){var s=r[n[u].ToGroupId];if(!s){s=r[n[u].ToGroupId]={min:i,max:a,msgs:[]}}if(n[u].NoticeSeq>p){_e.warn("noticeSeq="+p+",msgNoticeSeq="+n[u].NoticeSeq);p=n[u].NoticeSeq}n[u].Event=t;r[n[u].ToGroupId].msgs.push(n[u]);if(n[u].MsgSeq<s.min){r[n[u].ToGroupId].min=n[u].MsgSeq}if(n[u].MsgSeq>s.max){r[n[u].ToGroupId].max=n[u].MsgSeq}}for(var l in r){o=Z(r[l].msgs,o)}if(o.length){zt.updateTimeline()}if(e&&o.length)e(o)};var ie=function(t){var n=[];for(var r in t){var o=t[r];o.Event=C.GROUP_TIP;if(o.NoticeSeq>p){p=o.NoticeSeq}var i=Ie(o,false,true);if(i){n.push(i)}}if(n.length){zt.updateTimeline()}if(e&&n.length)e(n)};var ue=function(e,t){for(var r in e){var o=e[r];var i=o.MsgBody;var a=i.ReportType;if(t==false&&o.NoticeSeq&&o.NoticeSeq>p){p=o.NoticeSeq}var u=o.GroupInfo.To_Account;if(t){var s=o.ToGroupId+"_"+a+"_"+i.Operator_Account;var l=D[s];if(l){_e.warn("收到重复的群系统消息：key="+s);continue}D[s]=true}var c={SrcFlag:0,ReportType:a,GroupId:o.ToGroupId,GroupName:o.GroupInfo.GroupName,Operator_Account:i.Operator_Account,MsgTime:o.MsgTimeStamp,groupReportTypeMsg:i};switch(a){case N.JOIN_GROUP_REQUEST:c["RemarkInfo"]=i.RemarkInfo;c["MsgKey"]=i.MsgKey;c["Authentication"]=i.Authentication;c["UserDefinedField"]=o.UserDefinedField;c["From_Account"]=o.From_Account;c["MsgSeq"]=o.ClientSeq;c["MsgRandom"]=o.MsgRandom;break;case N.JOIN_GROUP_ACCEPT:case N.JOIN_GROUP_REFUSE:c["RemarkInfo"]=i.RemarkInfo;break;case N.KICK:case N.DESTORY:case N.CREATE:case N.INVITED_JOIN_GROUP_REQUEST:case N.INVITED_JOIN_GROUP_REQUEST_AGREE:case N.QUIT:case N.SET_ADMIN:case N.CANCEL_ADMIN:case N.REVOKE:break;case N.READED:break;case N.CUSTOM:c["MsgSeq"]=o.MsgSeq;c["UserDefinedField"]=i.UserDefinedField;break;default:_e.error("未知群系统消息类型：reportType="+a);break}if(t){if(n[a]){n[a](c)}else{_e.error("未知群系统消息类型：reportType="+a)}}else{if(n[a]){if(a==N.READED){var f=c.groupReportTypeMsg.GroupReadInfoArray;for(var d=0,g=f.length;d<g;d++){var m=f[d];n[a](m)}}else{n[a](c)}}}}};var se=function(e,t){var n,o,i;for(var a in e){n=e[a];o=n.PushType;if(t==false&&n.NoticeSeq&&n.NoticeSeq>p){p=n.NoticeSeq}i={Type:o};switch(o){case P.FRIEND_ADD:i["Accounts"]=n.FriendAdd_Account;break;case P.FRIEND_DELETE:i["Accounts"]=n.FriendDel_Account;break;case P.PENDENCY_ADD:i["PendencyList"]=n.PendencyAdd;break;case P.PENDENCY_DELETE:i["Accounts"]=n.FrienPencydDel_Account;break;case P.BLACK_LIST_ADD:i["Accounts"]=n.BlackListAdd_Account;break;case P.BLACK_LIST_DELETE:i["Accounts"]=n.BlackListDel_Account;break;default:_e.error("未知好友系统通知类型：friendNotice="+JSON.stringify(n));break}if(t){if(o==P.PENDENCY_ADD){if(r[o])r[o](i)}}else{if(r[o])r[o](i)}}};var le=function(e,t){var n,r,i;for(var a in e){n=e[a];r=n.PushType;if(t==false&&n.NoticeSeq&&n.NoticeSeq>p){p=n.NoticeSeq}i={Type:r};switch(r){case b.PROFILE_MODIFY:i["Profile_Account"]=n.Profile_Account;i["ProfileList"]=n.ProfileList;break;default:_e.error("未知资料系统通知类型：profileNotice="+JSON.stringify(n));break}if(t){if(r==b.PROFILE_MODIFY){if(o[r])o[r](i)}}else{if(o[r])o[r](i)}}};var ce=function(e){var t=e.MsgBody;var r=t.ReportType;var o=e.GroupInfo.To_Account;var i={SrcFlag:1,ReportType:r,GroupId:e.ToGroupId,GroupName:e.GroupInfo.GroupName,Operator_Account:t.Operator_Account,MsgTime:e.MsgTimeStamp};switch(r){case N.JOIN_GROUP_REQUEST:i["RemarkInfo"]=t.RemarkInfo;i["MsgKey"]=t.MsgKey;i["Authentication"]=t.Authentication;i["UserDefinedField"]=e.UserDefinedField;i["From_Account"]=e.From_Account;i["MsgSeq"]=e.ClientSeq;i["MsgRandom"]=e.MsgRandom;break;case N.JOIN_GROUP_ACCEPT:case N.JOIN_GROUP_REFUSE:i["RemarkInfo"]=t.RemarkInfo;break;case N.KICK:case N.DESTORY:case N.CREATE:case N.INVITED_JOIN_GROUP_REQUEST:case N.INVITED_JOIN_GROUP_REQUEST_AGREE:case N.QUIT:case N.SET_ADMIN:case N.CANCEL_ADMIN:case N.REVOKE:break;case N.CUSTOM:i["MsgSeq"]=e.MsgSeq;i["UserDefinedField"]=t.UserDefinedField;break;default:_e.error("未知群系统消息类型：reportType="+r);break}if(n[r])n[r](i)};var fe=function(e){for(var t=0,n=e.length;t<n;t++){pe(e[t])}};var pe=function(e){var t=e.SubMsgType;switch(t){case S.READED:_e.warn("C2C已读消息通知");if(e.ReadC2cMsgNotify&&e.ReadC2cMsgNotify.UinPairReadArray&&y[t]){for(var n=0,r=e.ReadC2cMsgNotify.UinPairReadArray.length;n<r;n++){var o=e.ReadC2cMsgNotify.UinPairReadArray[n];y[t](o)}}break;case S.KICKEDOUT:_e.warn("多终端互踢通知");qe("instance");if(y[t]){y[t]()}break;default:_e.error("未知C2c系统消息：subType="+t);break}};this.longPolling=function(e,t){var n={Timeout:J/1e3,Cookie:{NotifySeq:c,NoticeSeq:p}};if(W){n.Cookie.LongPollingId=W;r()}else{wt({},function(e){W=n.Cookie.LongPollingId=e.LongPollingId;J=e.Timeout>60?J:e.Timeout*1e3;r()})}function r(){Ke(n,function(e){for(var t in e.EventArray){var n=e.EventArray[t];switch(n.Event){case C.C2C:c=n.NotifySeq;_e.warn("longpolling: received new c2c msg");Jt.syncMsgs();break;case C.GROUP_COMMON:_e.warn("longpolling: received new group msgs");te(n.Event,n.GroupMsgArray);break;case C.GROUP_TIP:_e.warn("longpolling: received new group tips");te(n.Event,n.GroupTips);break;case C.GROUP_TIP2:_e.warn("longpolling: received new group tips");te(n.Event,n.GroupTips);break;case C.GROUP_SYSTEM:_e.warn("longpolling: received new group system msgs");ue(n.GroupTips,false);break;case C.FRIEND_NOTICE:_e.warn("longpolling: received new friend system notice");se(n.FriendListMod,false);break;case C.PROFILE_NOTICE:_e.warn("longpolling: received new profile system notice");le(n.ProfileDataMod,false);break;case C.C2C_COMMON:p=n.C2cMsgArray[0].NoticeSeq;_e.warn("longpolling: received new c2c_common msg",p);ee(n.Event,n.C2cMsgArray);break;case C.C2C_EVENT:p=n.C2cNotifyMsgArray[0].NoticeSeq;_e.warn("longpolling: received new c2c_event msg");fe(n.C2cNotifyMsgArray);break;default:_e.error("longpolling收到未知新消息类型: Event="+n.Event);break}}var r={ActionStatus:g.OK,ErrorCode:0};de(r)},function(e){de(e);if(t)t(e)})}};this.bigGroupLongPolling=function(e,t,n){var r={USP:1,StartSeq:M[e],HoldTime:E,Key:_[e]};He(r,function(n){var r=[];M[e]=n.NextSeq;E=n.HoldTime;_[e]=n.Key;if(n.RspMsgList&&n.RspMsgList.length>0){var o=0,i,a,u;for(var s=n.RspMsgList.length-1;s>=0;s--){i=n.RspMsgList[s];var l={F_Account:"From_Account",T_Account:"To_Account",FAType:"EnumFrom_AccountType",TAType:"EnumTo_AccountType",GCode:"GroupCode",GName:"GroupName",GId:"GroupId",MFlg:"MsgFlag",FAEInfo:"MsgFrom_AccountExtraInfo",Evt:"Event",GInfo:"GroupInfo",BPlc:"IsPlaceMsg",MBody:"MsgBody",Pri:"MsgPriority",Rdm:"MsgRandom",MSeq:"MsgSeq",TStp:"MsgTimeStamp",TGId:"ToGroupId",UEInfo:"UinExtInfo",UId:"UserId",BSys:"IsSystemMsg",FAHUrl:"From_AccountHeadurl",FANick:"From_AccountNick"};i=Ee.replaceObject(l,i);if(i.IsPlaceMsg||!i.From_Account||!i.MsgBody||i.MsgBody.length==0){continue}a=i.Event;switch(a){case C.GROUP_COMMON:_e.info("bigGroupLongPolling: return new group msg");u=Ie(i,false,false);u&&r.push(u);o=o+1;break;case C.GROUP_TIP:case C.GROUP_TIP2:_e.info("bigGroupLongPolling: return new group tip");u=Ie(i,false,false);u&&r.push(u);break;case C.GROUP_SYSTEM:_e.info("bigGroupLongPolling: new group system msg");ce(i);break;default:_e.error("bigGroupLongPolling收到未知新消息类型: Event="+a);break}}if(o>0){Jt.setBigGroupLongPollingMsgMap(i.ToGroupId,o);_e.warn("current bigGroupLongPollingMsgMap: "+JSON.stringify(v))}}Q=0;var c={ActionStatus:g.OK,ErrorCode:L.ON,ErrorInfo:"connection is ok..."};qt.callBack(c);if(t)t(r);else if(d)d(r);m&&Jt.bigGroupLongPolling(e)},function(t){if(t.ErrorCode==j){M[e]=0}else if(t.ErrorCode!=Y){_e.error(t.ErrorInfo);Q++}if(t.ErrorCode==X){_e.error("多实例登录，被kick");if(i){i()}}if(Q<$){m&&Jt.bigGroupLongPolling(e)}else{var r={ActionStatus:g.FAIL,ErrorCode:L.OFF,ErrorInfo:"connection is off"};qt.callBack(r)}if(n)n(t)},E*1e3)};var de=function(e){if(e.ErrorCode==0||e.ErrorCode==Y){z=0;H=false;var t;var n=false;switch(K){case L.INIT:n=true;K=L.ON;t="create connection successfully(INIT->ON)";break;case L.ON:t="connection is on...(ON->ON)";break;case L.RECONNECT:K=L.ON;t="connection is on...(RECONNECT->ON)";break;case L.OFF:n=true;K=L.RECONNECT;t="reconnect successfully(OFF->RECONNECT)";break}var r={ActionStatus:g.OK,ErrorCode:K,ErrorInfo:t};n&&qt.callBack(r);s&&Jt.longPolling()}else if(e.ErrorCode==X){_e.error("多实例登录，被kick");if(i){i()}}else{z++;_e.warn("longPolling接口第"+z+"次报错: "+e.ErrorInfo);if(z<=$){setTimeout(ge,100)}else{K=L.OFF;var o={ActionStatus:g.FAIL,ErrorCode:L.OFF,ErrorInfo:"connection is off"};H==false&&qt.callBack(o);H=true;_e.warn(V+"毫秒之后,SDK会发起新的longPolling请求...");setTimeout(ge,V)}}};var ge=function(){s&&Jt.longPolling()};var me=function(e){for(var t in e){var n=e[t];ue(n.GroupTips,true);switch(n.Event){case C.GROUP_SYSTEM:_e.warn("handlerApplyJoinGroupSystemMsgs： handler new group system msg");ue(n.GroupTips,true);break;default:_e.error("syncMsgs收到未知的群系统消息类型: Event="+n.Event);break}}};this.syncMsgs=function(t,n){var r=[];var o=[];ze(zt.cookie,zt.syncFlag,function(n){if(n.SyncFlag==2){zt.syncFlag=0}o=n.MsgList;zt.cookie=n.Cookie;for(var i in o){var a=o[i];var u,s,l;if(a.From_Account==ae.identifier){u=true;s=a.To_Account;l=""}else{u=false;s=a.From_Account;l=""}var c=zt.sessByTypeId(f.C2C,s);if(!c){c=new xt(f.C2C,s,s,l,0,0)}var p=new Ht(c,u,a.MsgSeq,a.MsgRandom,a.MsgTimeStamp,a.From_Account,A.COMMON,a.From_AccountNick,a.From_AccountHeadurl);var d=null;var g=null;var m=null;for(var M in a.MsgBody){d=a.MsgBody[M];m=d.MsgType;switch(m){case I.TEXT:g=new Ht.Elem.Text(d.MsgContent.Text);break;case I.FACE:g=new Ht.Elem.Face(d.MsgContent.Index,d.MsgContent.Data);break;case I.IMAGE:g=new Ht.Elem.Images(d.MsgContent.UUID,d.MsgContent.ImageFormat);for(var E in d.MsgContent.ImageInfoArray){var _=d.MsgContent.ImageInfoArray[E];g.addImage(new Ht.Elem.Images.Image(_.Type,_.Size,_.Width,_.Height,_.URL))}break;case I.SOUND:if(d.MsgContent){g=new Ht.Elem.Sound(d.MsgContent.UUID,d.MsgContent.Second,d.MsgContent.Size,a.From_Account,a.To_Account,d.MsgContent.Download_Flag,f.C2C)}else{m=I.TEXT;g=new Ht.Elem.Text("[语音消息]下载地址解析出错")}break;case I.LOCATION:g=new Ht.Elem.Location(d.MsgContent.Longitude,d.MsgContent.Latitude,d.MsgContent.Desc);break;case I.FILE:case I.FILE+" ":m=I.FILE;if(d.MsgContent){g=new Ht.Elem.File(d.MsgContent.UUID,d.MsgContent.FileName,d.MsgContent.FileSize,a.From_Account,a.To_Account,d.MsgContent.Download_Flag,f.C2C)}else{m=I.TEXT;g=new Ht.Elem.Text("[文件消息下载地址解析出错]")}break;case I.CUSTOM:try{var v=JSON.parse(d.MsgContent.Data);if(v&&v.userAction&&v.userAction==k.ING){continue}}catch(e){}m=I.CUSTOM;g=new Ht.Elem.Custom(d.MsgContent.Data,d.MsgContent.Desc,d.MsgContent.Ext);break;default:m=I.TEXT;g=new Ht.Elem.Text("web端暂不支持"+d.MsgType+"消息");break}p.elems.push(new Ht.Elem(m,g))}if(p.elems.length>0&&zt.addMsg(p,true)){r.push(p)}}me(n.EventArray);if(r.length>0)zt.updateTimeline();if(t)t(r);else if(r.length>0){if(e)e(r)}},function(e){_e.error("getMsgs failed:"+e.ErrorInfo);if(n)n(e)})};this.getC2CHistoryMsgs=function(e,t,n){if(!e.Peer_Account){if(n){n(Ee.getReturnError("Peer_Account is empty",-13));return}}if(!e.MaxCnt){e.MaxCnt=15}if(e.MaxCnt<=0){if(n){n(Ee.getReturnError("MaxCnt should be greater than 0",-14));return}}if(e.MaxCnt>15){if(n){n(Ee.getReturnError("MaxCnt can not be greater than 15",-15));return}return}if(e.MsgKey==null||e.MsgKey===undefined){e.MsgKey=""}var r={Peer_Account:e.Peer_Account,MaxCnt:e.MaxCnt,LastMsgTime:e.LastMsgTime,MsgKey:e.MsgKey};Ye(r,function(n){var r=[];var o=[];o=n.MsgList;var i=zt.sessByTypeId(f.C2C,e.Peer_Account);if(!i){i=new xt(f.C2C,e.Peer_Account,e.Peer_Account,"",0,0)}for(var a in o){var u=o[a];var s,l;var c=u.From_AccountHeadurl||"";if(u.From_Account==ae.identifier){s=true;l=u.To_Account}else{s=false;l=u.From_Account}var p=new Ht(i,s,u.MsgSeq,u.MsgRandom,u.MsgTimeStamp,u.From_Account,A.COMMON,u.From_AccountNick,c);var d=null;var g=null;var m=null;for(var M in u.MsgBody){d=u.MsgBody[M];m=d.MsgType;switch(m){case I.TEXT:g=new Ht.Elem.Text(d.MsgContent.Text);break;case I.FACE:g=new Ht.Elem.Face(d.MsgContent.Index,d.MsgContent.Data);break;case I.IMAGE:g=new Ht.Elem.Images(d.MsgContent.UUID,d.MsgContent.ImageFormat);for(var E in d.MsgContent.ImageInfoArray){var _=d.MsgContent.ImageInfoArray[E];g.addImage(new Ht.Elem.Images.Image(_.Type,_.Size,_.Width,_.Height,_.URL))}break;case I.SOUND:if(d.MsgContent){g=new Ht.Elem.Sound(d.MsgContent.UUID,d.MsgContent.Second,d.MsgContent.Size,u.From_Account,u.To_Account,d.MsgContent.Download_Flag,f.C2C)}else{m=I.TEXT;g=new Ht.Elem.Text("[语音消息]下载地址解析出错")}break;case I.LOCATION:g=new Ht.Elem.Location(d.MsgContent.Longitude,d.MsgContent.Latitude,d.MsgContent.Desc);break;case I.FILE:case I.FILE+" ":m=I.FILE;if(d.MsgContent){g=new Ht.Elem.File(d.MsgContent.UUID,d.MsgContent.FileName,d.MsgContent.FileSize,u.From_Account,u.To_Account,d.MsgContent.Download_Flag,f.C2C)}else{m=I.TEXT;g=new Ht.Elem.Text("[文件消息下载地址解析出错]")}break;case I.CUSTOM:m=I.CUSTOM;g=new Ht.Elem.Custom(d.MsgContent.Data,d.MsgContent.Desc,d.MsgContent.Ext);break;default:m=I.TEXT;g=new Ht.Elem.Text("web端暂不支持"+d.MsgType+"消息");break}p.elems.push(new Ht.Elem(m,g))}zt.addMsg(p);r.push(p)}zt.updateTimeline();if(t){var v={Complete:n.Complete,MsgCount:r.length,LastMsgTime:n.LastMsgTime,MsgKey:n.MsgKey,MsgList:r};i.isFinished(n.Complete);t(v)}},function(e){_e.error("getC2CHistoryMsgs failed:"+e.ErrorInfo);if(n)n(e)})};this.syncGroupMsgs=function(t,n,r){if(t.ReqMsgSeq<=0){if(r){var o="ReqMsgSeq must be greater than 0";var i=Ee.getReturnError(o,-16);r(i)}return}var a={GroupId:t.GroupId,ReqMsgSeq:t.ReqMsgSeq,ReqMsgNumber:t.ReqMsgNumber};Et(a,function(t){var r=[];var o=t.GroupId;var i=t.RspMsgList;var a=t.IsFinished;if(i==null||i===undefined){if(n){n([])}return}for(var u=i.length-1;u>=0;u--){var s=i[u];if(s.IsPlaceMsg||!s.From_Account||!s.MsgBody||s.MsgBody.length==0){continue}var l=Ie(s,true,true,a);if(l){r.push(l)}}if(r.length>0)zt.updateTimeline();if(n)n(r);else if(r.length>0){if(e)e(r)}},function(e){_e.error("getGroupMsgs failed:"+e.ErrorInfo);if(r)r(e)})};var Ie=function(e,n,r,o){if(e.IsPlaceMsg||!e.From_Account||!e.MsgBody||e.MsgBody.length==0){return null}var i,a,u,s,l;var c=e.ToGroupId;var p=c;if(e.GroupInfo){if(e.GroupInfo.GroupName){p=e.GroupInfo.GroupName}}s=e.From_Account;if(e.GroupInfo){if(e.GroupInfo.From_AccountNick){s=e.GroupInfo.From_AccountNick}if(e.GroupInfo.From_AccountHeadurl){l=e.GroupInfo.From_AccountHeadurl}else{l=null}}if(e.From_Account==ae.identifier){i=true;a=e.From_Account;u=""}else{i=false;a=e.From_Account;u=""}var d=zt.sessByTypeId(f.GROUP,c);if(!d){d=new xt(f.GROUP,c,p,u,0,0)}if(typeof o!=="undefined"){d.isFinished(o||0)}var g=G.COMMON;if(C.GROUP_TIP==e.Event||C.GROUP_TIP2==e.Event){g=G.TIP;var m=e.MsgBody;e.MsgBody=[];e.MsgBody.push({MsgType:I.GROUP_TIP,MsgContent:m})}else if(e.MsgPriority){if(e.MsgPriority==F.REDPACKET){g=G.REDPACKET}else if(e.MsgPriority==F.LOVEMSG){g=G.LOVEMSG}}var M=new Ht(d,i,e.MsgSeq,e.MsgRandom,e.MsgTimeStamp,e.From_Account,g,s,l);var E=null;var _=null;var v=null;for(var y in e.MsgBody){E=e.MsgBody[y];v=E.MsgType;switch(v){case I.TEXT:_=new Ht.Elem.Text(E.MsgContent.Text);break;case I.FACE:_=new Ht.Elem.Face(E.MsgContent.Index,E.MsgContent.Data);break;case I.IMAGE:_=new Ht.Elem.Images(E.MsgContent.UUID,E.MsgContent.ImageFormat||"");for(var h in E.MsgContent.ImageInfoArray){_.addImage(new Ht.Elem.Images.Image(E.MsgContent.ImageInfoArray[h].Type,E.MsgContent.ImageInfoArray[h].Size,E.MsgContent.ImageInfoArray[h].Width,E.MsgContent.ImageInfoArray[h].Height,E.MsgContent.ImageInfoArray[h].URL))}break;case I.SOUND:if(E.MsgContent){_=new Ht.Elem.Sound(E.MsgContent.UUID,E.MsgContent.Second,E.MsgContent.Size,e.From_Account,e.To_Account,E.MsgContent.Download_Flag,f.GROUP)}else{v=I.TEXT;_=new Ht.Elem.Text("[语音消息]下载地址解析出错")}break;case I.LOCATION:_=new Ht.Elem.Location(E.MsgContent.Longitude,E.MsgContent.Latitude,E.MsgContent.Desc);break;case I.FILE:case I.FILE+" ":v=I.FILE;var T=Ne(E.MsgContent.UUID,e.From_Account,E.MsgContent.FileName);if(E.MsgContent){_=new Ht.Elem.File(E.MsgContent.UUID,E.MsgContent.FileName,E.MsgContent.FileSize,e.From_Account,e.To_Account,E.MsgContent.Download_Flag,f.GROUP)}else{v=I.TEXT;_=new Ht.Elem.Text("[文件消息]地址解析出错")}break;case I.GROUP_TIP:var A=E.MsgContent.OpType;_=new Ht.Elem.GroupTip(A,E.MsgContent.Operator_Account,c,e.GroupInfo.GroupName,E.MsgContent.List_Account,E.MsgContent.MsgMemberExtraInfo);if(O.JOIN==A||O.QUIT==A){_.setGroupMemberNum(E.MsgContent.MemberNum)}else if(O.MODIFY_GROUP_INFO==A){var S=false;var N={GroupId:c,GroupFaceUrl:null,GroupName:null,OwnerAccount:null,GroupNotification:null,GroupIntroduction:null};var P=E.MsgContent.MsgGroupNewInfo;if(P.GroupFaceUrl){var b=new Ht.Elem.GroupTip.GroupInfo(R.FACE_URL,P.GroupFaceUrl);_.addGroupInfo(b);S=true;N.GroupFaceUrl=P.GroupFaceUrl}if(P.GroupName){var U=new Ht.Elem.GroupTip.GroupInfo(R.NAME,P.GroupName);_.addGroupInfo(U);S=true;N.GroupName=P.GroupName}if(P.Owner_Account){var L=new Ht.Elem.GroupTip.GroupInfo(R.OWNER,P.Owner_Account);_.addGroupInfo(L);S=true;N.OwnerAccount=P.Owner_Account}if(P.GroupNotification){var D=new Ht.Elem.GroupTip.GroupInfo(R.NOTIFICATION,P.GroupNotification);_.addGroupInfo(D);S=true;N.GroupNotification=P.GroupNotification}if(P.GroupIntroduction){var k=new Ht.Elem.GroupTip.GroupInfo(R.INTRODUCTION,P.GroupIntroduction);_.addGroupInfo(k);S=true;N.GroupIntroduction=P.GroupIntroduction}if(n==false&&S&&t){t(N)}}else if(O.MODIFY_MEMBER_INFO==A){var w=E.MsgContent.MsgMemberInfo;for(var B in w){var q=w[B];_.addMemberInfo(new Ht.Elem.GroupTip.MemberInfo(q.User_Account,q.ShutupTime))}}break;case I.CUSTOM:v=I.CUSTOM;_=new Ht.Elem.Custom(E.MsgContent.Data,E.MsgContent.Desc,E.MsgContent.Ext);break;default:v=I.TEXT;_=new Ht.Elem.Text("web端暂不支持"+E.MsgType+"消息");break}M.elems.push(new Ht.Elem(v,_))}if(r==false){return M}if(zt.addMsg(M,true)){M.extraInfo=e.GroupInfo.MsgFrom_AccountExtraInfo;return M}else{return null}};this.init=function(u,l,c){if(!u.onMsgNotify){_e.warn("listeners.onMsgNotify is empty")}e=u.onMsgNotify;if(u.onBigGroupMsgNotify){d=u.onBigGroupMsgNotify}else{_e.warn("listeners.onBigGroupMsgNotify is empty")}if(u.onC2cEventNotifys){y=u.onC2cEventNotifys}else{_e.warn("listeners.onC2cEventNotifys is empty")}if(u.onGroupSystemNotifys){n=u.onGroupSystemNotifys}else{_e.warn("listeners.onGroupSystemNotifys is empty")}if(u.onGroupInfoChangeNotify){t=u.onGroupInfoChangeNotify}else{_e.warn("listeners.onGroupInfoChangeNotify is empty")}if(u.onFriendSystemNotifys){r=u.onFriendSystemNotifys}else{_e.warn("listeners.onFriendSystemNotifys is empty")}if(u.onProfileSystemNotifys){o=u.onProfileSystemNotifys}else{_e.warn("listeners.onProfileSystemNotifys is empty")}if(u.onKickedEventCall){i=u.onKickedEventCall}else{_e.warn("listeners.onKickedEventCall is empty")}if(u.onLongPullingNotify){a=u.onLongPullingNotify}else{_e.warn("listeners.onLongPullingNotify is empty")}if(u.onAppliedDownloadUrl){h=u.onAppliedDownloadUrl}else{_e.warn("listeners.onAppliedDownloadUrl is empty")}if(!ae.identifier||!ae.userSig){if(l){var f={ActionStatus:g.OK,ErrorCode:0,ErrorInfo:"login success(no login state)"};l(f)}return}B(function(e){_e.info("initMyGroupMaxSeqs success");w(function(e){_e.info("initIpAndAuthkey success");if(l){_e.info("login success(have login state))");var t={ActionStatus:g.OK,ErrorCode:0,ErrorInfo:"login success"};l(t)}Jt.setLongPollingOn(true);s&&Jt.longPolling(l)},c)},c)};this.sendMsg=function(e,t,n){xe(e,function(r){if(e.sess.type()==f.C2C){if(!zt.addMsg(e)){var o="sendMsg: addMsg failed!";var i=Ee.getReturnError(o,-17);_e.error(o);if(n)n(i);return}zt.updateTimeline()}if(t)t(r)},function(e){if(n)n(e)})}};var Vt=new function(){this.fileMd5=null;var e=function(e,t,n){var r=null;try{r=new FileReader}catch(e){if(n){n(Ee.getReturnError("当前浏览器不支持FileReader",-18));return}}var o=File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice;if(!o){if(n){n(Ee.getReturnError("当前浏览器不支持FileAPI",-19));return}}var i=2*1024*1024;var a=Math.ceil(e.size/i);var u=0;r.onload=function(e){};function s(){var t=u*i,n=t+i>=e.size?e.size:t+i;var a=o.call(e,t,n);r.readAsArrayBuffer(a)}s()};this.uploadFile=function(t,n,r){var o={init:function(e,t,n){var r=this;r.file=e.file;r.onProgressCallBack=e.onProgressCallBack;if(e.abortButton){e.abortButton.onclick=r.abortHandler}r.total=r.file.size;r.loaded=0;r.step=1080*1024;r.sliceSize=0;r.sliceOffset=0;r.timestamp=ve();r.seq=he();r.random=Te();r.fromAccount=ae.identifier;r.toAccount=e.To_Account;r.fileMd5=e.fileMd5;r.businessType=e.businessType;r.fileType=e.fileType;r.cbOk=t;r.cbErr=n;r.reader=new FileReader;r.blobSlice=File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice;r.reader.onloadstart=r.onLoadStart;r.reader.onprogress=r.onProgress;r.reader.onabort=r.onAbort;r.reader.onerror=r.onerror;r.reader.onload=r.onLoad;r.reader.onloadend=r.onLoadEnd},upload:function(){var e=o;e.readBlob(0)},onLoadStart:function(){var e=o},onProgress:function(e){var t=o;t.loaded+=e.loaded;if(t.onProgressCallBack){t.onProgressCallBack(t.loaded,t.total)}},onAbort:function(){var e=o},onError:function(){var e=o},onLoad:function(e){var t=o;if(e.target.readyState==FileReader.DONE){var n=e.target.result;var r=n.indexOf(",");if(r!=-1){n=n.substr(r+1)}var i={From_Account:t.fromAccount,To_Account:t.toAccount,Busi_Id:t.businessType,File_Type:t.fileType,File_Str_Md5:t.fileMd5,PkgFlag:_.BASE64_DATA,File_Size:t.total,Slice_Offset:t.sliceOffset,Slice_Size:t.sliceSize,Slice_Data:n,Seq:t.seq,Timestamp:t.timestamp,Random:t.random};var a=function(e){if(e.IsFinish==0){t.loaded=e.Next_Offset;if(t.loaded<t.total){t.readBlob(t.loaded)}else{t.loaded=t.total}}else{if(t.cbOk){var n={ActionStatus:e.ActionStatus,ErrorCode:e.ErrorCode,ErrorInfo:e.ErrorInfo,File_UUID:e.File_UUID,File_Size:e.Next_Offset,URL_INFO:e.URL_INFO,Download_Flag:e.Download_Flag};if(t.fileType==h.FILE){n.URL_INFO=Ne(e.File_UUID,ae.identifier,t.file.name)}t.cbOk(n)}}Z=0};var u=function(e){if(Z<ee){Z++;setTimeout(function(){Lt(i,a,u)},1e3)}else{t.cbErr(e)}};Lt(i,a,u)}},onLoadEnd:function(){var e=o},readBlob:function(e){var t=o;var n,r=t.file;var i=e+t.step;if(i>t.total){i=t.total;t.sliceSize=i-e}else{t.sliceSize=t.step}t.sliceOffset=e;n=t.blobSlice.call(r,e,i);t.reader.readAsDataURL(n)},abortHandler:function(){var e=o;if(e.reader){e.reader.abort()}}};e(t.file,function(e){_e.info("fileMd5: "+e);t.fileMd5=e;o.init(t,n,r);o.upload()},r)}};t.SESSION_TYPE=f;t.MSG_MAX_LENGTH=d;t.C2C_MSG_SUB_TYPE=A;t.GROUP_MSG_SUB_TYPE=G;t.MSG_ELEMENT_TYPE=I;t.GROUP_TIP_TYPE=O;t.IMAGE_TYPE=M;t.GROUP_SYSTEM_TYPE=N;t.FRIEND_NOTICE_TYPE=P;t.GROUP_TIP_MODIFY_GROUP_INFO_TYPE=R;t.BROWSER_INFO=a;t.Emotions=t.EmotionPicData=Me;t.EmotionDataIndexs=t.EmotionPicDataIndex=Ie;t.TLS_ERROR_CODE=U;t.CONNECTION_STATUS=L;t.UPLOAD_PIC_BUSSINESS_TYPE=D;t.RECENT_CONTACT_TYPE=p;t.UPLOAD_RES_TYPE=h;t.Tool=Ee;t.Log=_e;t.Msg=Ht;t.Session=xt;t.MsgStore={sessMap:function(){return zt.sessMap()},sessCount:function(){return zt.sessCount()},sessByTypeId:function(e,t){return zt.sessByTypeId(e,t)},delSessByTypeId:function(e,t){return zt.delSessByTypeId(e,t)},resetCookieAndSyncFlag:function(){return zt.resetCookieAndSyncFlag()}};t.Resources=me;t.login=t.init=function(e,t,n,r,o){qt.init(t.onConnNotify,r,o);Le(e,t,n,r,o)};t.logout=t.offline=function(e,t){return qe("instance",e,t)};t.logoutAll=function(e,t){return qe("all",e,t)};t.sendMsg=function(e,t,n){return Jt.sendMsg(e,t,n)};t.syncMsgs=function(e,t){return Jt.syncMsgs(e,t)};t.getC2CHistoryMsgs=function(e,t,n){return Jt.getC2CHistoryMsgs(e,t,n)};t.syncGroupMsgs=function(e,t,n){return Jt.syncGroupMsgs(e,t,n)};t.c2CMsgReaded=function(e,t,n){return zt.c2CMsgReaded(e,t,n)};t.groupMsgReaded=function(e,t,n){return _t(e,t,n)};t.setAutoRead=function(e,t,n){return zt.setAutoRead(e,t,n)};t.createGroup=function(e,t,n){return Xe(e,t,n)};t.createGroupHigh=function(e,t,n){return je(e,t,n)};t.applyJoinGroup=function(e,t,n){return Qe(e,t,n)};t.handleApplyJoinGroupPendency=function(e,t,n){return Ze(e,t,n)};t.getPendencyGroup=function(e,t,n){return et(e,t,n)};t.getPendencyGroupRead=function(e,t,n){return tt(e,t,n)};t.handleInviteJoinGroupRequest=function(e,t,n){return nt(e,t,n)};t.deleteApplyJoinGroupPendency=function(e,t,n){return Ve(e,t,n)};t.quitGroup=function(e,t,n){return rt(e,t,n)};t.searchGroupByName=function(e,t,n){return it(e,t,n)};t.getGroupPublicInfo=function(e,t,n){return at(e,t,n)};t.getGroupInfo=function(e,t,n){return ut(e,t,n)};t.modifyGroupBaseInfo=function(e,t,n){return We(e,t,n)};t.getGroupMemberInfo=function(e,t,n){return st(e,t,n)};t.addGroupMember=function(e,t,n){return lt(e,t,n)};t.modifyGroupMember=function(e,t,n){return ct(e,t,n)};t.deleteGroupMember=function(e,t,n){return ft(e,t,n)};t.destroyGroup=function(e,t,n){return pt(e,t,n)};t.changeGroupOwner=function(e,t,n){return dt(e,t,n)};t.getJoinedGroupListHigh=function(e,t,n){return gt(e,t,n)};t.getRoleInGroup=function(e,t,n){return mt(e,t,n)};t.forbidSendMsg=function(e,t,n){return It(e,t,n)};t.sendCustomGroupNotify=function(e,t,n){return Mt(e,t,n)};t.applyJoinBigGroup=function(e,t,n){return $e(e,t,n)};t.quitBigGroup=function(e,t,n){return ot(e,t,n)};t.getProfilePortrait=function(e,t,n){return Ot(e,t,n)};t.setProfilePortrait=function(e,t,n){return Rt(e,t,n)};t.applyAddFriend=function(e,t,n){return yt(e,t,n)};t.getPendency=function(e,t,n){return Ct(e,t,n)};t.getPendencyReport=function(e,t,n){return At(e,t,n)};t.deletePendency=function(e,t,n){return St(e,t,n)};t.responseFriend=function(e,t,n){return Gt(e,t,n)};t.getAllFriend=function(e,t,n){return Ft(e,t,n)};t.deleteChat=function(e,t,n){return Tt(e,t,n)};t.deleteFriend=function(e,t,n){return ht(e,t,n)};t.addBlackList=function(e,t,n){return Nt(e,t,n)};t.deleteBlackList=function(e,t,n){return Pt(e,t,n)};t.getBlackList=function(e,t,n){return bt(e,t,n)};t.getRecentContactList=function(e,t,n){return Ut(e,t,n)};t.uploadFile=t.uploadPic=function(e,t,n){return Vt.uploadFile(e,t,n)};t.submitUploadFileForm=function(e,t,n){return Vt.submitUploadFileForm(e,t,n)};t.uploadFileByBase64=t.uploadPicByBase64=function(e,t,n){var r={To_Account:e.toAccount,Busi_Id:e.businessType,File_Type:e.File_Type,File_Str_Md5:e.fileMd5,PkgFlag:_.BASE64_DATA,File_Size:e.totalSize,Slice_Offset:0,Slice_Size:e.totalSize,Slice_Data:e.base64Str,Seq:he(),Timestamp:ve(),Random:Te()};return Lt(r,t,n)};t.getLongPollingId=function(e,t,n){return wt(e,t,n)};t.applyDownload=function(e,t,n){return Bt(e,t,n)};t.checkLogin=function(e,t){return Ge(e,t)}})(t);return t}();